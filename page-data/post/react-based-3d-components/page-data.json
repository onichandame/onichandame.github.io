{"componentChunkName":"component---src-template-blog-tsx","path":"/post/react-based-3d-components","result":{"data":{"mdx":{"frontmatter":{"title":"React-based 3D Components","author":"onichandame","date":"2019-05-13T00:00:00.000Z"},"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"React-based 3D Components\",\n  \"author\": \"onichandame\",\n  \"date\": \"2019-05-13T00:00:00.000Z\"\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#background\"\n  }), \"Background\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#demand-analysis\"\n  }), \"Demand Analysis\"), mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#end-user-experience\"\n  }), \"End-User Experience\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#technical-constraints\"\n  }), \"Technical Constraints\")))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#technology-analysis\"\n  }), \"Technology Analysis\"), mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#react-360\"\n  }), \"React 360\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#babylon\"\n  }), \"Babylon\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#three-based-solution\"\n  }), \"Three-based Solution\"), mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#react-three-fiber\"\n  }), \"React-Three-Fiber\")))))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#implementation\"\n  }), \"Implementation\"))), mdx(\"p\", null, \"This is a record of my personal experience on the 3D React component development. The content may be updated at any time because the project is still under development.\"), mdx(\"h1\", {\n    \"id\": \"background\"\n  }, \"Background\"), mdx(\"p\", null, \"I need to design and build a 3D based building information modelling(BIM). This BIM component needs to reside in an existing system based on Next.js, a UI framework based on React and specialized in SSR optimization.\"), mdx(\"h1\", {\n    \"id\": \"demand-analysis\"\n  }, \"Demand Analysis\"), mdx(\"h2\", {\n    \"id\": \"end-user-experience\"\n  }, \"End-User Experience\"), mdx(\"p\", null, \"The end user is an untrained worker who is not specialzed in either IT or BIM. Therefore the functions are simple and understandable for every computer user.\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"An intrinsic mapping between the UI and the real building, down to the component level\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"An intrinsic interactive pattern based on ray casting\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"All texts and numbers on the UI must be clear and minimal\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"A camera reset button, a scene reload button and a virtual button on each component to enter the corresponding page of details\")), mdx(\"h2\", {\n    \"id\": \"technical-constraints\"\n  }, \"Technical Constraints\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Must be integrated into a Next.js project\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Must be able to load 3D models like GLTF and OBJ\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Must be code-splitted to minimize the impact on the performance of the original website\")), mdx(\"h1\", {\n    \"id\": \"technology-analysis\"\n  }, \"Technology Analysis\"), mdx(\"p\", null, \"Based on the demand analysis, I conducted research to find some existing technologies that I can make use of. Many good frameworks are found but they all boils down to 3 fundamental technologies.\"), mdx(\"h2\", {\n    \"id\": \"react-360\"\n  }, \"React 360\"), mdx(\"p\", null, \"This is a framework built by Facebook for VR development. It also supports 3D UI out of the box. By default it loads models from GLTF and OBJ formats. At the first glance it may be the best choice for the following reasons:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"3D out of the box\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"interactive out of the box\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"supports open source models GLTF and OBJ\")), mdx(\"p\", null, \"But it is based on React Native, which makes it difficult to integrate into the existing webpage. Truly it can be embedded in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"<iframe>\"), \". But this workaround brings more complexities into the deployment phase. Moreover, this framework aims at VR, which is not a 100% overlap with BIM. Not to say that this framework is not as popular as its competitors, which means that it is more defficult to get help from the community.\"), mdx(\"h2\", {\n    \"id\": \"babylon\"\n  }, \"Babylon\"), mdx(\"p\", null, \"This framework supports the integration with React officially, according to the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://doc.babylonjs.com/resources/babylonjs_and_reactjs\"\n  }), \"official docs\"), \". However the docs also mentions that there may be performance overhead if used with React. The optimal choice is to use the pure JavaScript, which is what I would like to avoid. There are feasible ways such as React DOM or reconciler. But again the community is quite small. \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/brianzinn/react-babylonjs\"\n  }), \"The existing solution\"), \" has just 140 stars on GitHub at the time of writing this sentence. As an individual developer the size of community is at the top of my list.\"), mdx(\"h2\", {\n    \"id\": \"three-based-solution\"\n  }, \"Three-based Solution\"), mdx(\"p\", null, \"Now the main course comes. Three.js is the most popular 3D framework in Web development. It has the largest most active community. However, it is not designed for React hence the React-Three community is not comparable to the entire Three community.\"), mdx(\"h3\", {\n    \"id\": \"react-three-fiber\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"https://www.npmjs.com/package/react-three-fiber\"\n  }), \"React-Three-Fiber\")), mdx(\"p\", null, \"This is the most suitable framework in this condition.\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Deep integration with React with no significant performance overhead\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Able to load GLTF models using useLoader hook, GLTF loader from Three and React Suspense\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Just a wrapper around three so info from three community is most likely helpful\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Many helper packages from the same team that help ray casting, animation and more.\")), mdx(\"p\", null, \"The only hack needed here is the dynamic import of Next.js with SSR disabled. It is not a traditional hack that needs a proper fix, but a non-intuitive but reasonable solution for the problem: 2D rendering is compatible with SSR as SSR produces plain HTML, but 3D requires runtime loading of the resources such as models. If models are wrapped in React components, these components must be dynamically loaded using \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"next/dynamic\"), \".\"), mdx(\"p\", null, \"Also, dynamic importing of Next.js provides code-splitting out of the box.\"), mdx(\"h1\", {\n    \"id\": \"implementation\"\n  }, \"Implementation\"), mdx(\"p\", null, \"Currently, only the feasibility analysis is done. The package has not been designed yet.\"));\n}\n;\nMDXContent.isMDXComponent = true;","headings":[{"value":"Background","depth":1},{"value":"Demand Analysis","depth":1},{"value":"End-User Experience","depth":2},{"value":"Technical Constraints","depth":2},{"value":"Technology Analysis","depth":1},{"value":"React 360","depth":2},{"value":"Babylon","depth":2},{"value":"Three-based Solution","depth":2},{"value":"React-Three-Fiber","depth":3},{"value":"Implementation","depth":1}]}},"pageContext":{"locale":"en","type":"post","title":"React-based 3D Components","date":"2019-05-13T00:00:00.000Z","author":"onichandame"}}}