{"componentChunkName":"component---src-template-blog-tsx","path":"/cn/post/rootless-systemd-and-podman","result":{"data":{"mdx":{"frontmatter":{"title":"非Root和使用Podman的systemd","author":"onichandame","date":"2020-05-19T00:00:00.000Z"},"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"非Root和使用Podman的systemd\",\n  \"author\": \"onichandame\",\n  \"date\": \"2020-05-19T00:00:00.000Z\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"#steps\"\n  }, \"Steps\"), mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"#create-the-service\"\n  }, \"Create the service\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"#add-the-content\"\n  }, \"add the content\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"#enable-the-service\"\n  }, \"enable the service\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"#optional-enable-linger\"\n  }, \"(optional) enable linger\")))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"#podman-service\"\n  }, \"Podman Service\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"#credits\"\n  }, \"Credits\"))), mdx(\"p\", null, \"Systemd \\u662F\\u4E00\\u4E2A\\u7528\\u4E8E\\u81EA\\u52A8\\u5316\\u7BA1\\u7406\\u65E5\\u5E38\\u4EFB\\u52A1\\u7684\\u5DE5\\u5177\\u3002\\u6211\\u9047\\u5230\\u4E86\\u4EE5\\u4E0B\\u9650\\u5236\\uFF1A\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"\\u5728\\u542F\\u52A8\\u65F6\\u4EE5\\u975E root \\u7528\\u6237\\u7684\\u8EAB\\u4EFD\\u5F00\\u542F\\u4EFB\\u52A1\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"\\u5728\\u5931\\u8D25\\u65F6\\u81EA\\u52A8\\u91CD\\u542F\")), mdx(\"p\", null, \"\\u89E3\\u51B3\\u65B9\\u6848\\u662F\\u4F5C\\u4E3A\\u975E root \\u7528\\u6237\\u521B\\u5EFA systemd \\u670D\\u52A1\\u3002\"), mdx(\"h1\", null, \"\\u6B65\\u9AA4\"), mdx(\"h2\", null, \"\\u521B\\u5EFA\\u670D\\u52A1\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"systemctl edit --user --full --force <service_name>\\n\")), mdx(\"h2\", null, \"\\u6DFB\\u52A0\\u5185\\u5BB9\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-text\"\n  }, \"[Unit]\\nDescription=<Service>\\n\\n[Service]\\nRestart=always\\nExecStart=<Servece_Start>\\nExecStop=<Service_Stop>\\n\\n[Install]\\nWantedBy=default.target\\n\")), mdx(\"p\", null, \"\\u6700\\u540E\\u4E00\\u884C\\u5728 auto-start \\u7684\\u4F9D\\u8D56\\u5217\\u8868\\u4E2D\\u6CE8\\u518C\\u6B64\\u670D\\u52A1\\u3002\"), mdx(\"h2\", null, \"\\u542F\\u52A8\\u670D\\u52A1\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"systemctl enable --user <service_name>\\n\")), mdx(\"h2\", null, \"\\uFF08\\u53EF\\u9009\\uFF09\\u542F\\u52A8 linger\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \" sudo loginctl enable-linger \\\"$USER\\\"\\n\")), mdx(\"p\", null, \"\\u8FD9\\u4E00\\u9879\\u8BBE\\u7F6E\\u5141\\u8BB8\\u5728\\u7528\\u6237\\u767B\\u51FA\\u65F6\\u7EE7\\u7EED\\u8FD0\\u884C\\u670D\\u52A1\\u3002\"), mdx(\"h1\", null, \"Podman \\u670D\\u52A1\"), mdx(\"p\", null, \"\\u5C06 podman \\u5BB9\\u5668\\u4F5C\\u4E3A\\u670D\\u52A1\\u7BA1\\u7406\\u65F6\\uFF0C\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ExecStart\"), \"\\u547D\\u4EE4\\u5E94\\u8BE5\\u662F\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"podman start -a <container_name>\"), \"\\u800C\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ExecStop\"), \"\\u547D\\u4EE4\\u5E94\\u8BE5\\u662F\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"podman stop -t <seconds_to_wait> <container_name>\"), \"\\u3002\\u8BE6\\u7EC6\\u4FE1\\u606F\\u53C2\\u89C1\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux_atomic_host/7/html/managing_containers/running_containers_as_systemd_services_with_podman\"\n  }, \"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux_atomic_host/7/html/managing_containers/running_containers_as_systemd_services_with_podman\")), mdx(\"h1\", null, \"\\u611F\\u8C22\"), mdx(\"p\", null, \"\\u975E\\u5E38\\u611F\\u8C22\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/systemd/systemd/issues/2690\"\n  }, \"\\u6B64 issue\")));\n}\n;\nMDXContent.isMDXComponent = true;","headings":[{"value":"步骤","depth":1},{"value":"创建服务","depth":2},{"value":"添加内容","depth":2},{"value":"启动服务","depth":2},{"value":"（可选）启动 linger","depth":2},{"value":"Podman 服务","depth":1},{"value":"感谢","depth":1}]}},"pageContext":{"locale":"cn","type":"post","title":"非Root和使用Podman的systemd","date":"2020-05-19T00:00:00.000Z","author":"onichandame"}},"staticQueryHashes":["440568431","840944156","899237799","899237799"]}