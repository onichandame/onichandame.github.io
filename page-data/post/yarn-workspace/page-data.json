{"componentChunkName":"component---src-template-blog-tsx","path":"/post/yarn-workspace","result":{"data":{"mdx":{"frontmatter":{"title":"Monorepo with YARN Workspace","author":"onichandame","date":"2020-12-16T00:00:00.000Z"},"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Monorepo with YARN Workspace\",\n  \"author\": \"onichandame\",\n  \"date\": \"2020-12-16T00:00:00.000Z\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#different-versions-of-a-dependency\"\n  }), \"Different Versions of A Dependency\"))), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://classic.yarnpkg.com/en/docs/workspaces/\"\n  }), \"YARN workspaces\"), \" is the most low-level technique to manage a monorepo. Although it came after another monorepo managing tool \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/lerna/lerna\"\n  }), \"lerna\"), \", it is as powerful as any of the competitors.\"), mdx(\"p\", null, \"This article records some of the important findings during my experience with the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://classic.yarnpkg.com/en/docs/workspaces/\"\n  }), \"workspaces\"), \". Hence there is not an introductory section here. For the basic concepts, see the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://classic.yarnpkg.com/en/docs/workspaces/\"\n  }), \"official docs\"), \".\"), mdx(\"h1\", null, \"Different Versions of A Dependency\"), mdx(\"p\", null, \"A very popular selling-point of monorepo is that all sub-packages can now share common dependencies of the same version. It is also easier to keep all the common dependencies updated to the same versions. However, in practice it is not as simple as expected.\"), mdx(\"p\", null, \"In one of my monorepos, there are 2 packages. Both of them depends on the same dependency of the same version; but the nasty bit is that one of a dependencies of a package depends on a different version.\"), mdx(\"div\", {\n    \"className\": \"mermaid\",\n    \"data-processed\": \"true\"\n  }, mdx(\"svg\", _extends({\n    parentName: \"div\"\n  }, {\n    \"id\": \"mermaid-1608455298749\",\n    \"width\": \"100%\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\",\n    \"xmlnsXLink\": \"http://www.w3.org/1999/xlink\",\n    \"height\": \"230\",\n    \"style\": {\n      \"maxWidth\": \"215.24609375px\"\n    },\n    \"viewBox\": \"-20 -20 215.24609375 230\"\n  }), mdx(\"style\", {\n    parentName: \"svg\"\n  }, \"#mermaid-1608455298749{font-family:\\\"trebuchet ms\\\",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-1608455298749 .error-icon{fill:#552222;}#mermaid-1608455298749 .error-text{fill:#552222;stroke:#552222;}#mermaid-1608455298749 .edge-thickness-normal{stroke-width:2px;}#mermaid-1608455298749 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-1608455298749 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-1608455298749 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-1608455298749 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-1608455298749 .marker{fill:#333333;}#mermaid-1608455298749 .marker.cross{stroke:#333333;}#mermaid-1608455298749 svg{font-family:\\\"trebuchet ms\\\",verdana,arial,sans-serif;font-size:16px;}#mermaid-1608455298749 g.classGroup text{fill:#9370DB;fill:#131300;stroke:none;font-family:\\\"trebuchet ms\\\",verdana,arial,sans-serif;font-size:10px;}#mermaid-1608455298749 g.classGroup text .title{font-weight:bolder;}#mermaid-1608455298749 .classTitle{font-weight:bolder;}#mermaid-1608455298749 .node rect,#mermaid-1608455298749 .node circle,#mermaid-1608455298749 .node ellipse,#mermaid-1608455298749 .node polygon,#mermaid-1608455298749 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-1608455298749 .divider{stroke:#9370DB;stroke:1;}#mermaid-1608455298749 g.clickable{cursor:pointer;}#mermaid-1608455298749 g.classGroup rect{fill:#ECECFF;stroke:#9370DB;}#mermaid-1608455298749 g.classGroup line{stroke:#9370DB;stroke-width:1;}#mermaid-1608455298749 .classLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5;}#mermaid-1608455298749 .classLabel .label{fill:#9370DB;font-size:10px;}#mermaid-1608455298749 .relation{stroke:#333333;stroke-width:1;fill:none;}#mermaid-1608455298749 .dashed-line{stroke-dasharray:3;}#mermaid-1608455298749 #compositionStart,#mermaid-1608455298749 .composition{fill:#333333 !important;stroke:#333333 !important;stroke-width:1;}#mermaid-1608455298749 #compositionEnd,#mermaid-1608455298749 .composition{fill:#333333 !important;stroke:#333333 !important;stroke-width:1;}#mermaid-1608455298749 #dependencyStart,#mermaid-1608455298749 .dependency{fill:#333333 !important;stroke:#333333 !important;stroke-width:1;}#mermaid-1608455298749 #dependencyStart,#mermaid-1608455298749 .dependency{fill:#333333 !important;stroke:#333333 !important;stroke-width:1;}#mermaid-1608455298749 #extensionStart,#mermaid-1608455298749 .extension{fill:#333333 !important;stroke:#333333 !important;stroke-width:1;}#mermaid-1608455298749 #extensionEnd,#mermaid-1608455298749 .extension{fill:#333333 !important;stroke:#333333 !important;stroke-width:1;}#mermaid-1608455298749 #aggregationStart,#mermaid-1608455298749 .aggregation{fill:#ECECFF !important;stroke:#333333 !important;stroke-width:1;}#mermaid-1608455298749 #aggregationEnd,#mermaid-1608455298749 .aggregation{fill:#ECECFF !important;stroke:#333333 !important;stroke-width:1;}#mermaid-1608455298749 .edgeTerminals{font-size:11px;}#mermaid-1608455298749:root{--mermaid-font-family:\\\"trebuchet ms\\\",verdana,arial,sans-serif;}#mermaid-1608455298749 class{fill:apa;}\"), mdx(\"g\", {\n    parentName: \"svg\"\n  }), mdx(\"defs\", {\n    parentName: \"svg\"\n  }, mdx(\"marker\", _extends({\n    parentName: \"defs\"\n  }, {\n    \"id\": \"extensionStart\",\n    \"className\": \"extension\",\n    \"refX\": \"0\",\n    \"refY\": \"7\",\n    \"markerWidth\": \"190\",\n    \"markerHeight\": \"240\",\n    \"orient\": \"auto\"\n  }), mdx(\"path\", _extends({\n    parentName: \"marker\"\n  }, {\n    \"d\": \"M 1,7 L18,13 V 1 Z\"\n  })))), mdx(\"defs\", {\n    parentName: \"svg\"\n  }, mdx(\"marker\", _extends({\n    parentName: \"defs\"\n  }, {\n    \"id\": \"extensionEnd\",\n    \"refX\": \"19\",\n    \"refY\": \"7\",\n    \"markerWidth\": \"20\",\n    \"markerHeight\": \"28\",\n    \"orient\": \"auto\"\n  }), mdx(\"path\", _extends({\n    parentName: \"marker\"\n  }, {\n    \"d\": \"M 1,1 V 13 L18,7 Z\"\n  })))), mdx(\"defs\", {\n    parentName: \"svg\"\n  }, mdx(\"marker\", _extends({\n    parentName: \"defs\"\n  }, {\n    \"id\": \"compositionStart\",\n    \"className\": \"extension\",\n    \"refX\": \"0\",\n    \"refY\": \"7\",\n    \"markerWidth\": \"190\",\n    \"markerHeight\": \"240\",\n    \"orient\": \"auto\"\n  }), mdx(\"path\", _extends({\n    parentName: \"marker\"\n  }, {\n    \"d\": \"M 18,7 L9,13 L1,7 L9,1 Z\"\n  })))), mdx(\"defs\", {\n    parentName: \"svg\"\n  }, mdx(\"marker\", _extends({\n    parentName: \"defs\"\n  }, {\n    \"id\": \"compositionEnd\",\n    \"refX\": \"19\",\n    \"refY\": \"7\",\n    \"markerWidth\": \"20\",\n    \"markerHeight\": \"28\",\n    \"orient\": \"auto\"\n  }), mdx(\"path\", _extends({\n    parentName: \"marker\"\n  }, {\n    \"d\": \"M 18,7 L9,13 L1,7 L9,1 Z\"\n  })))), mdx(\"defs\", {\n    parentName: \"svg\"\n  }, mdx(\"marker\", _extends({\n    parentName: \"defs\"\n  }, {\n    \"id\": \"aggregationStart\",\n    \"className\": \"extension\",\n    \"refX\": \"0\",\n    \"refY\": \"7\",\n    \"markerWidth\": \"190\",\n    \"markerHeight\": \"240\",\n    \"orient\": \"auto\"\n  }), mdx(\"path\", _extends({\n    parentName: \"marker\"\n  }, {\n    \"d\": \"M 18,7 L9,13 L1,7 L9,1 Z\"\n  })))), mdx(\"defs\", {\n    parentName: \"svg\"\n  }, mdx(\"marker\", _extends({\n    parentName: \"defs\"\n  }, {\n    \"id\": \"aggregationEnd\",\n    \"refX\": \"19\",\n    \"refY\": \"7\",\n    \"markerWidth\": \"20\",\n    \"markerHeight\": \"28\",\n    \"orient\": \"auto\"\n  }), mdx(\"path\", _extends({\n    parentName: \"marker\"\n  }, {\n    \"d\": \"M 18,7 L9,13 L1,7 L9,1 Z\"\n  })))), mdx(\"defs\", {\n    parentName: \"svg\"\n  }, mdx(\"marker\", _extends({\n    parentName: \"defs\"\n  }, {\n    \"id\": \"dependencyStart\",\n    \"className\": \"extension\",\n    \"refX\": \"0\",\n    \"refY\": \"7\",\n    \"markerWidth\": \"190\",\n    \"markerHeight\": \"240\",\n    \"orient\": \"auto\"\n  }), mdx(\"path\", _extends({\n    parentName: \"marker\"\n  }, {\n    \"d\": \"M 5,7 L9,13 L1,7 L9,1 Z\"\n  })))), mdx(\"defs\", {\n    parentName: \"svg\"\n  }, mdx(\"marker\", _extends({\n    parentName: \"defs\"\n  }, {\n    \"id\": \"dependencyEnd\",\n    \"refX\": \"19\",\n    \"refY\": \"7\",\n    \"markerWidth\": \"20\",\n    \"markerHeight\": \"28\",\n    \"orient\": \"auto\"\n  }), mdx(\"path\", _extends({\n    parentName: \"marker\"\n  }, {\n    \"d\": \"M 18,7 L9,13 L14,7 L9,1 Z\"\n  })))), mdx(\"g\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"id\": \"classid-package1-0\",\n    \"className\": \"classGroup\",\n    \"transform\": \"translate(0,0 )\"\n  }), mdx(\"rect\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"0\",\n    \"y\": \"0\",\n    \"width\": \"56.03125\",\n    \"height\": \"30\",\n    \"className\": \"\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"y\": \"15\",\n    \"x\": \"0\"\n  }), mdx(\"tspan\", _extends({\n    parentName: \"text\"\n  }, {\n    \"className\": \"title\",\n    \"x\": \"5\"\n  }), \"package1\")), mdx(\"line\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x1\": \"0\",\n    \"y1\": \"21\",\n    \"y2\": \"21\",\n    \"x2\": \"56.03125\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"5\",\n    \"y\": \"31\",\n    \"fill\": \"white\",\n    \"className\": \"classText\"\n  })), mdx(\"line\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x1\": \"0\",\n    \"y1\": \"26\",\n    \"y2\": \"26\",\n    \"x2\": \"56.03125\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"5\",\n    \"y\": \"41\",\n    \"fill\": \"white\",\n    \"className\": \"classText\"\n  }))), mdx(\"g\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"id\": \"classid-dep1ver1-1\",\n    \"className\": \"classGroup\",\n    \"transform\": \"translate(10.8359375,80 )\"\n  }), mdx(\"rect\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"0\",\n    \"y\": \"0\",\n    \"width\": \"54.359375\",\n    \"height\": \"30\",\n    \"className\": \"\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"y\": \"15\",\n    \"x\": \"0\"\n  }), mdx(\"tspan\", _extends({\n    parentName: \"text\"\n  }, {\n    \"className\": \"title\",\n    \"x\": \"5\"\n  }), \"dep1ver1\")), mdx(\"line\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x1\": \"0\",\n    \"y1\": \"21\",\n    \"y2\": \"21\",\n    \"x2\": \"54.359375\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"5\",\n    \"y\": \"31\",\n    \"fill\": \"white\",\n    \"className\": \"classText\"\n  })), mdx(\"line\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x1\": \"0\",\n    \"y1\": \"26\",\n    \"y2\": \"26\",\n    \"x2\": \"54.359375\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"5\",\n    \"y\": \"41\",\n    \"fill\": \"white\",\n    \"className\": \"classText\"\n  }))), mdx(\"g\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"id\": \"classid-package2-2\",\n    \"className\": \"classGroup\",\n    \"transform\": \"translate(110.05078125,0 )\"\n  }), mdx(\"rect\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"0\",\n    \"y\": \"0\",\n    \"width\": \"56.03125\",\n    \"height\": \"30\",\n    \"className\": \"\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"y\": \"15\",\n    \"x\": \"0\"\n  }), mdx(\"tspan\", _extends({\n    parentName: \"text\"\n  }, {\n    \"className\": \"title\",\n    \"x\": \"5\"\n  }), \"package2\")), mdx(\"line\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x1\": \"0\",\n    \"y1\": \"21\",\n    \"y2\": \"21\",\n    \"x2\": \"56.03125\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"5\",\n    \"y\": \"31\",\n    \"fill\": \"white\",\n    \"className\": \"classText\"\n  })), mdx(\"line\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x1\": \"0\",\n    \"y1\": \"26\",\n    \"y2\": \"26\",\n    \"x2\": \"56.03125\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"5\",\n    \"y\": \"41\",\n    \"fill\": \"white\",\n    \"className\": \"classText\"\n  }))), mdx(\"g\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"id\": \"classid-dep2-3\",\n    \"className\": \"classGroup\",\n    \"transform\": \"translate(131.17578125,80 )\"\n  }), mdx(\"rect\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"0\",\n    \"y\": \"0\",\n    \"width\": \"33.78125\",\n    \"height\": \"30\",\n    \"className\": \"\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"y\": \"15\",\n    \"x\": \"0\"\n  }), mdx(\"tspan\", _extends({\n    parentName: \"text\"\n  }, {\n    \"className\": \"title\",\n    \"x\": \"5\"\n  }), \"dep2\")), mdx(\"line\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x1\": \"0\",\n    \"y1\": \"21\",\n    \"y2\": \"21\",\n    \"x2\": \"33.78125\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"5\",\n    \"y\": \"31\",\n    \"fill\": \"white\",\n    \"className\": \"classText\"\n  })), mdx(\"line\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x1\": \"0\",\n    \"y1\": \"26\",\n    \"y2\": \"26\",\n    \"x2\": \"33.78125\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"5\",\n    \"y\": \"41\",\n    \"fill\": \"white\",\n    \"className\": \"classText\"\n  }))), mdx(\"g\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"id\": \"classid-dep1ver2-4\",\n    \"className\": \"classGroup\",\n    \"transform\": \"translate(120.88671875,160 )\"\n  }), mdx(\"rect\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"0\",\n    \"y\": \"0\",\n    \"width\": \"54.359375\",\n    \"height\": \"30\",\n    \"className\": \"\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"y\": \"15\",\n    \"x\": \"0\"\n  }), mdx(\"tspan\", _extends({\n    parentName: \"text\"\n  }, {\n    \"className\": \"title\",\n    \"x\": \"5\"\n  }), \"dep1ver2\")), mdx(\"line\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x1\": \"0\",\n    \"y1\": \"21\",\n    \"y2\": \"21\",\n    \"x2\": \"54.359375\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"5\",\n    \"y\": \"31\",\n    \"fill\": \"white\",\n    \"className\": \"classText\"\n  })), mdx(\"line\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x1\": \"0\",\n    \"y1\": \"26\",\n    \"y2\": \"26\",\n    \"x2\": \"54.359375\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"5\",\n    \"y\": \"41\",\n    \"fill\": \"white\",\n    \"className\": \"classText\"\n  }))), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"d\": \"M28.015625,30L28.015625,34.166666666666664C28.015625,38.333333333333336,28.015625,46.666666666666664,29.057291666666668,55C30.098958333333332,63.333333333333336,32.182291666666664,71.66666666666667,33.223958333333336,75.83333333333333L34.265625,80\",\n    \"id\": \"edge0\",\n    \"className\": \"relation dashed-line\",\n    \"markerEnd\": \"url(#dependencyEnd)\"\n  })), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"d\": \"M120.42822265625,30L115.52872721354167,34.166666666666664C110.62923177083333,38.333333333333336,100.83024088541667,46.666666666666664,90.40828450520833,55C79.986328125,63.333333333333336,68.94140625,71.66666666666667,63.4189453125,75.83333333333333L57.896484375,80\",\n    \"id\": \"edge1\",\n    \"className\": \"relation dashed-line\",\n    \"markerEnd\": \"url(#dependencyEnd)\"\n  })), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"d\": \"M141.81640625,30L142.85807291666666,34.166666666666664C143.89973958333334,38.333333333333336,145.98307291666666,46.666666666666664,147.02473958333334,55C148.06640625,63.333333333333336,148.06640625,71.66666666666667,148.06640625,75.83333333333333L148.06640625,80\",\n    \"id\": \"edge2\",\n    \"className\": \"relation dashed-line\",\n    \"markerEnd\": \"url(#dependencyEnd)\"\n  })), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"d\": \"M148.06640625,110L148.06640625,114.16666666666667C148.06640625,118.33333333333333,148.06640625,126.66666666666667,148.06640625,135C148.06640625,143.33333333333334,148.06640625,151.66666666666666,148.06640625,155.83333333333334L148.06640625,160\",\n    \"id\": \"edge3\",\n    \"className\": \"relation dashed-line\",\n    \"markerEnd\": \"url(#dependencyEnd)\"\n  })))), mdx(\"p\", null, \"The above diagram shows the relationships between packages and the dependencies I have once encountered. In this case, 2 versions of the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"dep 1\"), \" hoisted and both need to be installed.\"), mdx(\"p\", null, \"It happens that the version on which the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"dep 2\"), \" depends was installed in the root, which brings a lot of troubles. For example, if the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"dep 1\"), \" was typescript and you edited the codes using the tsserver plugin of VSCode, the tsserver would pick up the typescript installed in the root to type-check your codes in the packages. But when the packages are compiled, the typescipt compiler actually used is the ones they each directly depends on. Hence the codes that pass the IDE may break when compiled.\"), mdx(\"p\", null, \"My solution to this problem is to pick the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"dep 1\"), \" from the packages and install it in the root.\"), mdx(\"div\", {\n    \"className\": \"mermaid\",\n    \"data-processed\": \"true\"\n  }, mdx(\"svg\", _extends({\n    parentName: \"div\"\n  }, {\n    \"id\": \"mermaid-1608455298700\",\n    \"width\": \"100%\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\",\n    \"xmlnsXLink\": \"http://www.w3.org/1999/xlink\",\n    \"height\": \"310\",\n    \"style\": {\n      \"maxWidth\": \"306.421875px\"\n    },\n    \"viewBox\": \"-20 -20 306.421875 310\"\n  }), mdx(\"style\", {\n    parentName: \"svg\"\n  }, \"#mermaid-1608455298700{font-family:\\\"trebuchet ms\\\",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-1608455298700 .error-icon{fill:#552222;}#mermaid-1608455298700 .error-text{fill:#552222;stroke:#552222;}#mermaid-1608455298700 .edge-thickness-normal{stroke-width:2px;}#mermaid-1608455298700 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-1608455298700 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-1608455298700 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-1608455298700 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-1608455298700 .marker{fill:#333333;}#mermaid-1608455298700 .marker.cross{stroke:#333333;}#mermaid-1608455298700 svg{font-family:\\\"trebuchet ms\\\",verdana,arial,sans-serif;font-size:16px;}#mermaid-1608455298700 g.classGroup text{fill:#9370DB;fill:#131300;stroke:none;font-family:\\\"trebuchet ms\\\",verdana,arial,sans-serif;font-size:10px;}#mermaid-1608455298700 g.classGroup text .title{font-weight:bolder;}#mermaid-1608455298700 .classTitle{font-weight:bolder;}#mermaid-1608455298700 .node rect,#mermaid-1608455298700 .node circle,#mermaid-1608455298700 .node ellipse,#mermaid-1608455298700 .node polygon,#mermaid-1608455298700 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-1608455298700 .divider{stroke:#9370DB;stroke:1;}#mermaid-1608455298700 g.clickable{cursor:pointer;}#mermaid-1608455298700 g.classGroup rect{fill:#ECECFF;stroke:#9370DB;}#mermaid-1608455298700 g.classGroup line{stroke:#9370DB;stroke-width:1;}#mermaid-1608455298700 .classLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5;}#mermaid-1608455298700 .classLabel .label{fill:#9370DB;font-size:10px;}#mermaid-1608455298700 .relation{stroke:#333333;stroke-width:1;fill:none;}#mermaid-1608455298700 .dashed-line{stroke-dasharray:3;}#mermaid-1608455298700 #compositionStart,#mermaid-1608455298700 .composition{fill:#333333 !important;stroke:#333333 !important;stroke-width:1;}#mermaid-1608455298700 #compositionEnd,#mermaid-1608455298700 .composition{fill:#333333 !important;stroke:#333333 !important;stroke-width:1;}#mermaid-1608455298700 #dependencyStart,#mermaid-1608455298700 .dependency{fill:#333333 !important;stroke:#333333 !important;stroke-width:1;}#mermaid-1608455298700 #dependencyStart,#mermaid-1608455298700 .dependency{fill:#333333 !important;stroke:#333333 !important;stroke-width:1;}#mermaid-1608455298700 #extensionStart,#mermaid-1608455298700 .extension{fill:#333333 !important;stroke:#333333 !important;stroke-width:1;}#mermaid-1608455298700 #extensionEnd,#mermaid-1608455298700 .extension{fill:#333333 !important;stroke:#333333 !important;stroke-width:1;}#mermaid-1608455298700 #aggregationStart,#mermaid-1608455298700 .aggregation{fill:#ECECFF !important;stroke:#333333 !important;stroke-width:1;}#mermaid-1608455298700 #aggregationEnd,#mermaid-1608455298700 .aggregation{fill:#ECECFF !important;stroke:#333333 !important;stroke-width:1;}#mermaid-1608455298700 .edgeTerminals{font-size:11px;}#mermaid-1608455298700:root{--mermaid-font-family:\\\"trebuchet ms\\\",verdana,arial,sans-serif;}#mermaid-1608455298700 class{fill:apa;}\"), mdx(\"g\", {\n    parentName: \"svg\"\n  }), mdx(\"defs\", {\n    parentName: \"svg\"\n  }, mdx(\"marker\", _extends({\n    parentName: \"defs\"\n  }, {\n    \"id\": \"extensionStart\",\n    \"className\": \"extension\",\n    \"refX\": \"0\",\n    \"refY\": \"7\",\n    \"markerWidth\": \"190\",\n    \"markerHeight\": \"240\",\n    \"orient\": \"auto\"\n  }), mdx(\"path\", _extends({\n    parentName: \"marker\"\n  }, {\n    \"d\": \"M 1,7 L18,13 V 1 Z\"\n  })))), mdx(\"defs\", {\n    parentName: \"svg\"\n  }, mdx(\"marker\", _extends({\n    parentName: \"defs\"\n  }, {\n    \"id\": \"extensionEnd\",\n    \"refX\": \"19\",\n    \"refY\": \"7\",\n    \"markerWidth\": \"20\",\n    \"markerHeight\": \"28\",\n    \"orient\": \"auto\"\n  }), mdx(\"path\", _extends({\n    parentName: \"marker\"\n  }, {\n    \"d\": \"M 1,1 V 13 L18,7 Z\"\n  })))), mdx(\"defs\", {\n    parentName: \"svg\"\n  }, mdx(\"marker\", _extends({\n    parentName: \"defs\"\n  }, {\n    \"id\": \"compositionStart\",\n    \"className\": \"extension\",\n    \"refX\": \"0\",\n    \"refY\": \"7\",\n    \"markerWidth\": \"190\",\n    \"markerHeight\": \"240\",\n    \"orient\": \"auto\"\n  }), mdx(\"path\", _extends({\n    parentName: \"marker\"\n  }, {\n    \"d\": \"M 18,7 L9,13 L1,7 L9,1 Z\"\n  })))), mdx(\"defs\", {\n    parentName: \"svg\"\n  }, mdx(\"marker\", _extends({\n    parentName: \"defs\"\n  }, {\n    \"id\": \"compositionEnd\",\n    \"refX\": \"19\",\n    \"refY\": \"7\",\n    \"markerWidth\": \"20\",\n    \"markerHeight\": \"28\",\n    \"orient\": \"auto\"\n  }), mdx(\"path\", _extends({\n    parentName: \"marker\"\n  }, {\n    \"d\": \"M 18,7 L9,13 L1,7 L9,1 Z\"\n  })))), mdx(\"defs\", {\n    parentName: \"svg\"\n  }, mdx(\"marker\", _extends({\n    parentName: \"defs\"\n  }, {\n    \"id\": \"aggregationStart\",\n    \"className\": \"extension\",\n    \"refX\": \"0\",\n    \"refY\": \"7\",\n    \"markerWidth\": \"190\",\n    \"markerHeight\": \"240\",\n    \"orient\": \"auto\"\n  }), mdx(\"path\", _extends({\n    parentName: \"marker\"\n  }, {\n    \"d\": \"M 18,7 L9,13 L1,7 L9,1 Z\"\n  })))), mdx(\"defs\", {\n    parentName: \"svg\"\n  }, mdx(\"marker\", _extends({\n    parentName: \"defs\"\n  }, {\n    \"id\": \"aggregationEnd\",\n    \"refX\": \"19\",\n    \"refY\": \"7\",\n    \"markerWidth\": \"20\",\n    \"markerHeight\": \"28\",\n    \"orient\": \"auto\"\n  }), mdx(\"path\", _extends({\n    parentName: \"marker\"\n  }, {\n    \"d\": \"M 18,7 L9,13 L1,7 L9,1 Z\"\n  })))), mdx(\"defs\", {\n    parentName: \"svg\"\n  }, mdx(\"marker\", _extends({\n    parentName: \"defs\"\n  }, {\n    \"id\": \"dependencyStart\",\n    \"className\": \"extension\",\n    \"refX\": \"0\",\n    \"refY\": \"7\",\n    \"markerWidth\": \"190\",\n    \"markerHeight\": \"240\",\n    \"orient\": \"auto\"\n  }), mdx(\"path\", _extends({\n    parentName: \"marker\"\n  }, {\n    \"d\": \"M 5,7 L9,13 L1,7 L9,1 Z\"\n  })))), mdx(\"defs\", {\n    parentName: \"svg\"\n  }, mdx(\"marker\", _extends({\n    parentName: \"defs\"\n  }, {\n    \"id\": \"dependencyEnd\",\n    \"refX\": \"19\",\n    \"refY\": \"7\",\n    \"markerWidth\": \"20\",\n    \"markerHeight\": \"28\",\n    \"orient\": \"auto\"\n  }), mdx(\"path\", _extends({\n    parentName: \"marker\"\n  }, {\n    \"d\": \"M 18,7 L9,13 L14,7 L9,1 Z\"\n  })))), mdx(\"g\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"id\": \"classid-root-0\",\n    \"className\": \"classGroup\",\n    \"transform\": \"translate(118.9921875,0 )\"\n  }), mdx(\"rect\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"0\",\n    \"y\": \"0\",\n    \"width\": \"30.109375\",\n    \"height\": \"30\",\n    \"className\": \"\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"y\": \"15\",\n    \"x\": \"0\"\n  }), mdx(\"tspan\", _extends({\n    parentName: \"text\"\n  }, {\n    \"className\": \"title\",\n    \"x\": \"5\"\n  }), \"root\")), mdx(\"line\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x1\": \"0\",\n    \"y1\": \"21\",\n    \"y2\": \"21\",\n    \"x2\": \"30.109375\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"5\",\n    \"y\": \"31\",\n    \"fill\": \"white\",\n    \"className\": \"classText\"\n  })), mdx(\"line\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x1\": \"0\",\n    \"y1\": \"26\",\n    \"y2\": \"26\",\n    \"x2\": \"30.109375\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"5\",\n    \"y\": \"41\",\n    \"fill\": \"white\",\n    \"className\": \"classText\"\n  }))), mdx(\"g\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"id\": \"classid-package1-1\",\n    \"className\": \"classGroup\",\n    \"transform\": \"translate(0,80 )\"\n  }), mdx(\"rect\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"0\",\n    \"y\": \"0\",\n    \"width\": \"56.03125\",\n    \"height\": \"30\",\n    \"className\": \"\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"y\": \"15\",\n    \"x\": \"0\"\n  }), mdx(\"tspan\", _extends({\n    parentName: \"text\"\n  }, {\n    \"className\": \"title\",\n    \"x\": \"5\"\n  }), \"package1\")), mdx(\"line\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x1\": \"0\",\n    \"y1\": \"21\",\n    \"y2\": \"21\",\n    \"x2\": \"56.03125\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"5\",\n    \"y\": \"31\",\n    \"fill\": \"white\",\n    \"className\": \"classText\"\n  })), mdx(\"line\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x1\": \"0\",\n    \"y1\": \"26\",\n    \"y2\": \"26\",\n    \"x2\": \"56.03125\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"5\",\n    \"y\": \"41\",\n    \"fill\": \"white\",\n    \"className\": \"classText\"\n  }))), mdx(\"g\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"id\": \"classid-package2-2\",\n    \"className\": \"classGroup\",\n    \"transform\": \"translate(106.03125,80 )\"\n  }), mdx(\"rect\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"0\",\n    \"y\": \"0\",\n    \"width\": \"56.03125\",\n    \"height\": \"30\",\n    \"className\": \"\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"y\": \"15\",\n    \"x\": \"0\"\n  }), mdx(\"tspan\", _extends({\n    parentName: \"text\"\n  }, {\n    \"className\": \"title\",\n    \"x\": \"5\"\n  }), \"package2\")), mdx(\"line\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x1\": \"0\",\n    \"y1\": \"21\",\n    \"y2\": \"21\",\n    \"x2\": \"56.03125\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"5\",\n    \"y\": \"31\",\n    \"fill\": \"white\",\n    \"className\": \"classText\"\n  })), mdx(\"line\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x1\": \"0\",\n    \"y1\": \"26\",\n    \"y2\": \"26\",\n    \"x2\": \"56.03125\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"5\",\n    \"y\": \"41\",\n    \"fill\": \"white\",\n    \"className\": \"classText\"\n  }))), mdx(\"g\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"id\": \"classid-dep1ver1-3\",\n    \"className\": \"classGroup\",\n    \"transform\": \"translate(212.0625,80 )\"\n  }), mdx(\"rect\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"0\",\n    \"y\": \"0\",\n    \"width\": \"54.359375\",\n    \"height\": \"30\",\n    \"className\": \"\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"y\": \"15\",\n    \"x\": \"0\"\n  }), mdx(\"tspan\", _extends({\n    parentName: \"text\"\n  }, {\n    \"className\": \"title\",\n    \"x\": \"5\"\n  }), \"dep1ver1\")), mdx(\"line\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x1\": \"0\",\n    \"y1\": \"21\",\n    \"y2\": \"21\",\n    \"x2\": \"54.359375\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"5\",\n    \"y\": \"31\",\n    \"fill\": \"white\",\n    \"className\": \"classText\"\n  })), mdx(\"line\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x1\": \"0\",\n    \"y1\": \"26\",\n    \"y2\": \"26\",\n    \"x2\": \"54.359375\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"5\",\n    \"y\": \"41\",\n    \"fill\": \"white\",\n    \"className\": \"classText\"\n  }))), mdx(\"g\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"id\": \"classid-dep2-4\",\n    \"className\": \"classGroup\",\n    \"transform\": \"translate(117.15625,160 )\"\n  }), mdx(\"rect\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"0\",\n    \"y\": \"0\",\n    \"width\": \"33.78125\",\n    \"height\": \"30\",\n    \"className\": \"\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"y\": \"15\",\n    \"x\": \"0\"\n  }), mdx(\"tspan\", _extends({\n    parentName: \"text\"\n  }, {\n    \"className\": \"title\",\n    \"x\": \"5\"\n  }), \"dep2\")), mdx(\"line\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x1\": \"0\",\n    \"y1\": \"21\",\n    \"y2\": \"21\",\n    \"x2\": \"33.78125\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"5\",\n    \"y\": \"31\",\n    \"fill\": \"white\",\n    \"className\": \"classText\"\n  })), mdx(\"line\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x1\": \"0\",\n    \"y1\": \"26\",\n    \"y2\": \"26\",\n    \"x2\": \"33.78125\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"5\",\n    \"y\": \"41\",\n    \"fill\": \"white\",\n    \"className\": \"classText\"\n  }))), mdx(\"g\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"id\": \"classid-dep1ver2-5\",\n    \"className\": \"classGroup\",\n    \"transform\": \"translate(106.8671875,240 )\"\n  }), mdx(\"rect\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"0\",\n    \"y\": \"0\",\n    \"width\": \"54.359375\",\n    \"height\": \"30\",\n    \"className\": \"\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"y\": \"15\",\n    \"x\": \"0\"\n  }), mdx(\"tspan\", _extends({\n    parentName: \"text\"\n  }, {\n    \"className\": \"title\",\n    \"x\": \"5\"\n  }), \"dep1ver2\")), mdx(\"line\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x1\": \"0\",\n    \"y1\": \"21\",\n    \"y2\": \"21\",\n    \"x2\": \"54.359375\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"5\",\n    \"y\": \"31\",\n    \"fill\": \"white\",\n    \"className\": \"classText\"\n  })), mdx(\"line\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x1\": \"0\",\n    \"y1\": \"26\",\n    \"y2\": \"26\",\n    \"x2\": \"54.359375\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"5\",\n    \"y\": \"41\",\n    \"fill\": \"white\",\n    \"className\": \"classText\"\n  }))), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"d\": \"M118.9921875,20.67933981727085L103.82942708333333,26.39944984772571C88.66666666666667,32.11955987818057,58.341145833333336,43.559779939090284,43.178385416666664,53.4465566362118C28.015625,63.333333333333336,28.015625,71.66666666666667,28.015625,75.83333333333333L28.015625,80\",\n    \"id\": \"edge0\",\n    \"className\": \"relation\",\n    \"markerStart\": \"url(#compositionStart)\"\n  })), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"d\": \"M134.046875,30L134.046875,34.166666666666664C134.046875,38.333333333333336,134.046875,46.666666666666664,134.046875,55C134.046875,63.333333333333336,134.046875,71.66666666666667,134.046875,75.83333333333333L134.046875,80\",\n    \"id\": \"edge1\",\n    \"className\": \"relation\",\n    \"markerStart\": \"url(#compositionStart)\"\n  })), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"d\": \"M149.1015625,20.724470850352766L164.125,26.437059041960637C179.1484375,32.14964723356851,209.1953125,43.57482361678425,224.21875,53.45407847505879C239.2421875,63.333333333333336,239.2421875,71.66666666666667,239.2421875,75.83333333333333L239.2421875,80\",\n    \"id\": \"edge2\",\n    \"className\": \"relation dashed-line\",\n    \"markerEnd\": \"url(#dependencyEnd)\"\n  })), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"d\": \"M134.046875,110L134.046875,114.16666666666667C134.046875,118.33333333333333,134.046875,126.66666666666667,134.046875,135C134.046875,143.33333333333334,134.046875,151.66666666666666,134.046875,155.83333333333334L134.046875,160\",\n    \"id\": \"edge3\",\n    \"className\": \"relation dashed-line\",\n    \"markerEnd\": \"url(#dependencyEnd)\"\n  })), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"d\": \"M134.046875,190L134.046875,194.16666666666666C134.046875,198.33333333333334,134.046875,206.66666666666666,134.046875,215C134.046875,223.33333333333334,134.046875,231.66666666666666,134.046875,235.83333333333334L134.046875,240\",\n    \"id\": \"edge4\",\n    \"className\": \"relation dashed-line\",\n    \"markerEnd\": \"url(#dependencyEnd)\"\n  })))), mdx(\"p\", null, \"This setup forces the right version of \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"dep 1\"), \" to be installed in the root. But there are some restrictions:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"the picked dependency must be devDep. Otherwise the the packages installed through npm registry would have a missing dependency. This could be worked around by adding the dependency to the packages also. But it also means that the dep used in development environment and production environment would be different so you have to carefully sync the versions of the dep.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"the version of the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"dep 1\"), \" on which the packages depend must be the same because there can be only 1 version of it to be installed in the root.\")), mdx(\"p\", null, \"Hope tsserver and the IDEs will have it fixed properly in the near future.\"));\n}\n;\nMDXContent.isMDXComponent = true;","headings":[{"value":"Different Versions of A Dependency","depth":1}]}},"pageContext":{"locale":"en","type":"post","title":"Monorepo with YARN Workspace","date":"2020-12-16T00:00:00.000Z","author":"onichandame"}},"staticQueryHashes":["440568431","840944156","899237799","899237799"]}