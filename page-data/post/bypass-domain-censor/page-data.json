{"componentChunkName":"component---src-template-blog-tsx","path":"/post/bypass-domain-censor","result":{"data":{"mdx":{"frontmatter":{"title":"Bypass Domain Censorship","author":"onichandame","date":"2020-12-20T00:00:00.000Z"},"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Bypass Domain Censorship\",\n  \"author\": \"onichandame\",\n  \"date\": \"2020-12-20T00:00:00.000Z\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#principles\"\n  }), \"Principles\"), mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#use-a-custom-port\"\n  }), \"Use A Custom Port\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#reverse-proxy\"\n  }), \"Reverse Proxy\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#tls\"\n  }), \"TLS\")))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#recommended-practices\"\n  }), \"Recommended Practices\"), mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#choice-of-service-provider\"\n  }), \"Choice of Service Provider\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#tls-on-origin\"\n  }), \"TLS on Origin\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#reverse-proxy-1\"\n  }), \"Reverse Proxy\"))))), mdx(\"p\", null, \"In certain countries or regions, people are not allowed to maintain their own sites without registering the server, domain or IP to the authority. This restriction has some positive effects that the authority can easily find whoever responsible for a site spreading damaging information like terrorism or children pornography. However this also imposes some very difficult inconvenience, especially to the web developers.\"), mdx(\"p\", null, \"For instance, a developer may want to have a testing server for a project. If the testing site needs to go through the entire registration process, the delivery cycle would be extended unnecessarily just for the registration, not to mention the extra cost of time and money if the registration fails eventually. Moreover, each site must come with a unique testing area as the authority needs to regularly check that the content of the registered site is virtually the same as it was on the registration day.\"), mdx(\"p\", null, \"Here records some useful techniques in work around the censorship of the domain/server. They are actively updated to reflect the latest change. \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Do please respect other people's freedom and use them within the legal boundary\"), \".\"), mdx(\"h1\", null, \"Principles\"), mdx(\"p\", null, \"This section records some principles to solve the problem. Based on these principles many different implementations are possible.\"), mdx(\"h2\", null, \"Use A Custom Port\"), mdx(\"p\", null, \"Usually the traffic towards some well-known ports will be scanned and blocked if not found in the registration list. A simple solution would be using a less well-known port to serve. The total amount of ports on the internet is too large to analyze them all in real-time, so a custom port would normally be let go. This is the foundation of any other extended techniques.\"), mdx(\"div\", {\n    \"className\": \"mermaid\",\n    \"data-processed\": \"true\"\n  }, mdx(\"svg\", _extends({\n    parentName: \"div\"\n  }, {\n    \"id\": \"mermaid-1609857302511\",\n    \"width\": \"100%\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\",\n    \"height\": \"249\",\n    \"style\": {\n      \"maxWidth\": \"450px\"\n    },\n    \"viewBox\": \"-50 -10 450 249\"\n  }), mdx(\"style\", {\n    parentName: \"svg\"\n  }, \"#mermaid-1609857302511{font-family:\\\"trebuchet ms\\\",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-1609857302511 .error-icon{fill:#552222;}#mermaid-1609857302511 .error-text{fill:#552222;stroke:#552222;}#mermaid-1609857302511 .edge-thickness-normal{stroke-width:2px;}#mermaid-1609857302511 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-1609857302511 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-1609857302511 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-1609857302511 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-1609857302511 .marker{fill:#333333;}#mermaid-1609857302511 .marker.cross{stroke:#333333;}#mermaid-1609857302511 svg{font-family:\\\"trebuchet ms\\\",verdana,arial,sans-serif;font-size:16px;}#mermaid-1609857302511 .actor{stroke:hsl(259.6261682243,59.7765363128%,87.9019607843%);fill:#ECECFF;}#mermaid-1609857302511 text.actor > tspan{fill:black;stroke:none;}#mermaid-1609857302511 .actor-line{stroke:grey;}#mermaid-1609857302511 .messageLine0{stroke-width:1.5;stroke-dasharray:none;stroke:#333;}#mermaid-1609857302511 .messageLine1{stroke-width:1.5;stroke-dasharray:2,2;stroke:#333;}#mermaid-1609857302511 #arrowhead path{fill:#333;stroke:#333;}#mermaid-1609857302511 .sequenceNumber{fill:white;}#mermaid-1609857302511 #sequencenumber{fill:#333;}#mermaid-1609857302511 #crosshead path{fill:#333;stroke:#333;}#mermaid-1609857302511 .messageText{fill:#333;stroke:#333;}#mermaid-1609857302511 .labelBox{stroke:hsl(259.6261682243,59.7765363128%,87.9019607843%);fill:#ECECFF;}#mermaid-1609857302511 .labelText,#mermaid-1609857302511 .labelText > tspan{fill:black;stroke:none;}#mermaid-1609857302511 .loopText,#mermaid-1609857302511 .loopText > tspan{fill:black;stroke:none;}#mermaid-1609857302511 .loopLine{stroke-width:2px;stroke-dasharray:2,2;stroke:hsl(259.6261682243,59.7765363128%,87.9019607843%);fill:hsl(259.6261682243,59.7765363128%,87.9019607843%);}#mermaid-1609857302511 .note{stroke:#aaaa33;fill:#fff5ad;}#mermaid-1609857302511 .noteText,#mermaid-1609857302511 .noteText > tspan{fill:black;stroke:none;}#mermaid-1609857302511 .activation0{fill:#f4f4f4;stroke:#666;}#mermaid-1609857302511 .activation1{fill:#f4f4f4;stroke:#666;}#mermaid-1609857302511 .activation2{fill:#f4f4f4;stroke:#666;}#mermaid-1609857302511:root{--mermaid-font-family:\\\"trebuchet ms\\\",verdana,arial,sans-serif;}#mermaid-1609857302511 sequence{fill:apa;}\"), mdx(\"g\", {\n    parentName: \"svg\"\n  }), mdx(\"g\", {\n    parentName: \"svg\"\n  }, mdx(\"line\", _extends({\n    parentName: \"g\"\n  }, {\n    \"id\": \"actor0\",\n    \"x1\": \"75\",\n    \"y1\": \"5\",\n    \"x2\": \"75\",\n    \"y2\": \"238\",\n    \"className\": \"actor-line\",\n    \"strokeWidth\": \"0.5px\",\n    \"stroke\": \"#999\"\n  })), mdx(\"rect\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"0\",\n    \"y\": \"0\",\n    \"fill\": \"#eaeaea\",\n    \"stroke\": \"#666\",\n    \"width\": \"150\",\n    \"height\": \"65\",\n    \"rx\": \"3\",\n    \"ry\": \"3\",\n    \"className\": \"actor\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"75\",\n    \"y\": \"32.5\",\n    \"dominantBaseline\": \"central\",\n    \"alignmentBaseline\": \"central\",\n    \"className\": \"actor\",\n    \"style\": {\n      \"textAnchor\": \"middle\",\n      \"fontSize\": \"14px\",\n      \"fontWeight\": \"400\",\n      \"fontFamily\": \"Open-Sans, sans-serif\"\n    }\n  }), mdx(\"tspan\", _extends({\n    parentName: \"text\"\n  }, {\n    \"x\": \"75\",\n    \"dy\": \"0\"\n  }), \"Browser\"))), mdx(\"g\", {\n    parentName: \"svg\"\n  }, mdx(\"line\", _extends({\n    parentName: \"g\"\n  }, {\n    \"id\": \"actor1\",\n    \"x1\": \"275\",\n    \"y1\": \"5\",\n    \"x2\": \"275\",\n    \"y2\": \"238\",\n    \"className\": \"actor-line\",\n    \"strokeWidth\": \"0.5px\",\n    \"stroke\": \"#999\"\n  })), mdx(\"rect\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"200\",\n    \"y\": \"0\",\n    \"fill\": \"#eaeaea\",\n    \"stroke\": \"#666\",\n    \"width\": \"150\",\n    \"height\": \"65\",\n    \"rx\": \"3\",\n    \"ry\": \"3\",\n    \"className\": \"actor\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"275\",\n    \"y\": \"32.5\",\n    \"dominantBaseline\": \"central\",\n    \"alignmentBaseline\": \"central\",\n    \"className\": \"actor\",\n    \"style\": {\n      \"textAnchor\": \"middle\",\n      \"fontSize\": \"14px\",\n      \"fontWeight\": \"400\",\n      \"fontFamily\": \"Open-Sans, sans-serif\"\n    }\n  }), mdx(\"tspan\", _extends({\n    parentName: \"text\"\n  }, {\n    \"x\": \"275\",\n    \"dy\": \"0\"\n  }), \"Server\"))), mdx(\"defs\", {\n    parentName: \"svg\"\n  }, mdx(\"marker\", _extends({\n    parentName: \"defs\"\n  }, {\n    \"id\": \"arrowhead\",\n    \"refX\": \"5\",\n    \"refY\": \"2\",\n    \"markerWidth\": \"6\",\n    \"markerHeight\": \"4\",\n    \"orient\": \"auto\"\n  }), mdx(\"path\", _extends({\n    parentName: \"marker\"\n  }, {\n    \"d\": \"M 0,0 V 4 L6,2 Z\"\n  })))), mdx(\"defs\", {\n    parentName: \"svg\"\n  }, mdx(\"marker\", _extends({\n    parentName: \"defs\"\n  }, {\n    \"id\": \"crosshead\",\n    \"markerWidth\": \"15\",\n    \"markerHeight\": \"8\",\n    \"orient\": \"auto\",\n    \"refX\": \"16\",\n    \"refY\": \"4\"\n  }), mdx(\"path\", _extends({\n    parentName: \"marker\"\n  }, {\n    \"fill\": \"black\",\n    \"stroke\": \"#000000\",\n    \"strokeWidth\": \"1px\",\n    \"d\": \"M 9,2 V 6 L16,4 Z\",\n    \"style\": {\n      \"strokeDasharray\": \"0, 0\"\n    }\n  })), mdx(\"path\", _extends({\n    parentName: \"marker\"\n  }, {\n    \"fill\": \"none\",\n    \"stroke\": \"#000000\",\n    \"strokeWidth\": \"1px\",\n    \"d\": \"M 0,1 L 6,7 M 6,1 L 0,7\",\n    \"style\": {\n      \"strokeDasharray\": \"0, 0\"\n    }\n  })))), mdx(\"defs\", {\n    parentName: \"svg\"\n  }, mdx(\"marker\", _extends({\n    parentName: \"defs\"\n  }, {\n    \"id\": \"sequencenumber\",\n    \"refX\": \"15\",\n    \"refY\": \"15\",\n    \"markerWidth\": \"60\",\n    \"markerHeight\": \"40\",\n    \"orient\": \"auto\"\n  }), mdx(\"circle\", _extends({\n    parentName: \"marker\"\n  }, {\n    \"cx\": \"15\",\n    \"cy\": \"15\",\n    \"r\": \"6\"\n  })))), mdx(\"text\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"x\": \"175\",\n    \"y\": \"80\",\n    \"textAnchor\": \"middle\",\n    \"dominantBaseline\": \"middle\",\n    \"alignmentBaseline\": \"middle\",\n    \"className\": \"messageText\",\n    \"dy\": \"1em\",\n    \"style\": {\n      \"fontFamily\": \"\\\"trebuchet ms\\\", verdana, arial, sans-serif\",\n      \"fontSize\": \"16px\",\n      \"fontWeight\": \"400\"\n    }\n  }), \"port 80\"), mdx(\"line\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"x1\": \"75\",\n    \"y1\": \"109\",\n    \"x2\": \"275\",\n    \"y2\": \"109\",\n    \"className\": \"messageLine0\",\n    \"strokeWidth\": \"2\",\n    \"stroke\": \"none\",\n    \"markerEnd\": \"url(#crosshead)\",\n    \"style\": {\n      \"fill\": \"none\"\n    }\n  })), mdx(\"text\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"x\": \"175\",\n    \"y\": \"124\",\n    \"textAnchor\": \"middle\",\n    \"dominantBaseline\": \"middle\",\n    \"alignmentBaseline\": \"middle\",\n    \"className\": \"messageText\",\n    \"dy\": \"1em\",\n    \"style\": {\n      \"fontFamily\": \"\\\"trebuchet ms\\\", verdana, arial, sans-serif\",\n      \"fontSize\": \"16px\",\n      \"fontWeight\": \"400\"\n    }\n  }), \"port 3000\"), mdx(\"line\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"x1\": \"75\",\n    \"y1\": \"153\",\n    \"x2\": \"275\",\n    \"y2\": \"153\",\n    \"className\": \"messageLine0\",\n    \"strokeWidth\": \"2\",\n    \"stroke\": \"none\",\n    \"markerEnd\": \"url(#arrowhead)\",\n    \"style\": {\n      \"fill\": \"none\"\n    }\n  })), mdx(\"g\", {\n    parentName: \"svg\"\n  }, mdx(\"rect\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"0\",\n    \"y\": \"173\",\n    \"fill\": \"#eaeaea\",\n    \"stroke\": \"#666\",\n    \"width\": \"150\",\n    \"height\": \"65\",\n    \"rx\": \"3\",\n    \"ry\": \"3\",\n    \"className\": \"actor\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"75\",\n    \"y\": \"205.5\",\n    \"dominantBaseline\": \"central\",\n    \"alignmentBaseline\": \"central\",\n    \"className\": \"actor\",\n    \"style\": {\n      \"textAnchor\": \"middle\",\n      \"fontSize\": \"14px\",\n      \"fontWeight\": \"400\",\n      \"fontFamily\": \"Open-Sans, sans-serif\"\n    }\n  }), mdx(\"tspan\", _extends({\n    parentName: \"text\"\n  }, {\n    \"x\": \"75\",\n    \"dy\": \"0\"\n  }), \"Browser\"))), mdx(\"g\", {\n    parentName: \"svg\"\n  }, mdx(\"rect\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"200\",\n    \"y\": \"173\",\n    \"fill\": \"#eaeaea\",\n    \"stroke\": \"#666\",\n    \"width\": \"150\",\n    \"height\": \"65\",\n    \"rx\": \"3\",\n    \"ry\": \"3\",\n    \"className\": \"actor\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"275\",\n    \"y\": \"205.5\",\n    \"dominantBaseline\": \"central\",\n    \"alignmentBaseline\": \"central\",\n    \"className\": \"actor\",\n    \"style\": {\n      \"textAnchor\": \"middle\",\n      \"fontSize\": \"14px\",\n      \"fontWeight\": \"400\",\n      \"fontFamily\": \"Open-Sans, sans-serif\"\n    }\n  }), mdx(\"tspan\", _extends({\n    parentName: \"text\"\n  }, {\n    \"x\": \"275\",\n    \"dy\": \"0\"\n  }), \"Server\"))))), mdx(\"p\", null, \"Using a custom port brings some difficulties in usage.\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"The visitors now have to type in the port in the url like \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"www.example.com:8080\"), \".\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"In many browsers, a common url is automatically upgraded to \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"https\"), \". So you type in \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"www.example.com\"), \" and the browser takes you to \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"https://www.example.com\"), \". This convenience is not possible if a custom port is used though.\")), mdx(\"p\", null, \"To bypass the inconveniences above, something needs to be done.\"), mdx(\"h2\", null, \"Reverse Proxy\"), mdx(\"p\", null, \"To access the server from a normal port like 80 and 443, a reverse proxy can be used.\"), mdx(\"div\", {\n    \"className\": \"mermaid\",\n    \"data-processed\": \"true\"\n  }, mdx(\"svg\", _extends({\n    parentName: \"div\"\n  }, {\n    \"id\": \"mermaid-1609857302571\",\n    \"width\": \"100%\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\",\n    \"height\": \"249\",\n    \"style\": {\n      \"maxWidth\": \"650px\"\n    },\n    \"viewBox\": \"-50 -10 650 249\"\n  }), mdx(\"style\", {\n    parentName: \"svg\"\n  }, \"#mermaid-1609857302571{font-family:\\\"trebuchet ms\\\",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-1609857302571 .error-icon{fill:#552222;}#mermaid-1609857302571 .error-text{fill:#552222;stroke:#552222;}#mermaid-1609857302571 .edge-thickness-normal{stroke-width:2px;}#mermaid-1609857302571 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-1609857302571 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-1609857302571 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-1609857302571 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-1609857302571 .marker{fill:#333333;}#mermaid-1609857302571 .marker.cross{stroke:#333333;}#mermaid-1609857302571 svg{font-family:\\\"trebuchet ms\\\",verdana,arial,sans-serif;font-size:16px;}#mermaid-1609857302571 .actor{stroke:hsl(259.6261682243,59.7765363128%,87.9019607843%);fill:#ECECFF;}#mermaid-1609857302571 text.actor > tspan{fill:black;stroke:none;}#mermaid-1609857302571 .actor-line{stroke:grey;}#mermaid-1609857302571 .messageLine0{stroke-width:1.5;stroke-dasharray:none;stroke:#333;}#mermaid-1609857302571 .messageLine1{stroke-width:1.5;stroke-dasharray:2,2;stroke:#333;}#mermaid-1609857302571 #arrowhead path{fill:#333;stroke:#333;}#mermaid-1609857302571 .sequenceNumber{fill:white;}#mermaid-1609857302571 #sequencenumber{fill:#333;}#mermaid-1609857302571 #crosshead path{fill:#333;stroke:#333;}#mermaid-1609857302571 .messageText{fill:#333;stroke:#333;}#mermaid-1609857302571 .labelBox{stroke:hsl(259.6261682243,59.7765363128%,87.9019607843%);fill:#ECECFF;}#mermaid-1609857302571 .labelText,#mermaid-1609857302571 .labelText > tspan{fill:black;stroke:none;}#mermaid-1609857302571 .loopText,#mermaid-1609857302571 .loopText > tspan{fill:black;stroke:none;}#mermaid-1609857302571 .loopLine{stroke-width:2px;stroke-dasharray:2,2;stroke:hsl(259.6261682243,59.7765363128%,87.9019607843%);fill:hsl(259.6261682243,59.7765363128%,87.9019607843%);}#mermaid-1609857302571 .note{stroke:#aaaa33;fill:#fff5ad;}#mermaid-1609857302571 .noteText,#mermaid-1609857302571 .noteText > tspan{fill:black;stroke:none;}#mermaid-1609857302571 .activation0{fill:#f4f4f4;stroke:#666;}#mermaid-1609857302571 .activation1{fill:#f4f4f4;stroke:#666;}#mermaid-1609857302571 .activation2{fill:#f4f4f4;stroke:#666;}#mermaid-1609857302571:root{--mermaid-font-family:\\\"trebuchet ms\\\",verdana,arial,sans-serif;}#mermaid-1609857302571 sequence{fill:apa;}\"), mdx(\"g\", {\n    parentName: \"svg\"\n  }), mdx(\"g\", {\n    parentName: \"svg\"\n  }, mdx(\"line\", _extends({\n    parentName: \"g\"\n  }, {\n    \"id\": \"actor0\",\n    \"x1\": \"75\",\n    \"y1\": \"5\",\n    \"x2\": \"75\",\n    \"y2\": \"238\",\n    \"className\": \"actor-line\",\n    \"strokeWidth\": \"0.5px\",\n    \"stroke\": \"#999\"\n  })), mdx(\"rect\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"0\",\n    \"y\": \"0\",\n    \"fill\": \"#eaeaea\",\n    \"stroke\": \"#666\",\n    \"width\": \"150\",\n    \"height\": \"65\",\n    \"rx\": \"3\",\n    \"ry\": \"3\",\n    \"className\": \"actor\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"75\",\n    \"y\": \"32.5\",\n    \"dominantBaseline\": \"central\",\n    \"alignmentBaseline\": \"central\",\n    \"className\": \"actor\",\n    \"style\": {\n      \"textAnchor\": \"middle\",\n      \"fontSize\": \"14px\",\n      \"fontWeight\": \"400\",\n      \"fontFamily\": \"Open-Sans, sans-serif\"\n    }\n  }), mdx(\"tspan\", _extends({\n    parentName: \"text\"\n  }, {\n    \"x\": \"75\",\n    \"dy\": \"0\"\n  }), \"Browser\"))), mdx(\"g\", {\n    parentName: \"svg\"\n  }, mdx(\"line\", _extends({\n    parentName: \"g\"\n  }, {\n    \"id\": \"actor1\",\n    \"x1\": \"275\",\n    \"y1\": \"5\",\n    \"x2\": \"275\",\n    \"y2\": \"238\",\n    \"className\": \"actor-line\",\n    \"strokeWidth\": \"0.5px\",\n    \"stroke\": \"#999\"\n  })), mdx(\"rect\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"200\",\n    \"y\": \"0\",\n    \"fill\": \"#eaeaea\",\n    \"stroke\": \"#666\",\n    \"width\": \"150\",\n    \"height\": \"65\",\n    \"rx\": \"3\",\n    \"ry\": \"3\",\n    \"className\": \"actor\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"275\",\n    \"y\": \"32.5\",\n    \"dominantBaseline\": \"central\",\n    \"alignmentBaseline\": \"central\",\n    \"className\": \"actor\",\n    \"style\": {\n      \"textAnchor\": \"middle\",\n      \"fontSize\": \"14px\",\n      \"fontWeight\": \"400\",\n      \"fontFamily\": \"Open-Sans, sans-serif\"\n    }\n  }), mdx(\"tspan\", _extends({\n    parentName: \"text\"\n  }, {\n    \"x\": \"275\",\n    \"dy\": \"0\"\n  }), \"Reverse Proxy\"))), mdx(\"g\", {\n    parentName: \"svg\"\n  }, mdx(\"line\", _extends({\n    parentName: \"g\"\n  }, {\n    \"id\": \"actor2\",\n    \"x1\": \"475\",\n    \"y1\": \"5\",\n    \"x2\": \"475\",\n    \"y2\": \"238\",\n    \"className\": \"actor-line\",\n    \"strokeWidth\": \"0.5px\",\n    \"stroke\": \"#999\"\n  })), mdx(\"rect\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"400\",\n    \"y\": \"0\",\n    \"fill\": \"#eaeaea\",\n    \"stroke\": \"#666\",\n    \"width\": \"150\",\n    \"height\": \"65\",\n    \"rx\": \"3\",\n    \"ry\": \"3\",\n    \"className\": \"actor\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"475\",\n    \"y\": \"32.5\",\n    \"dominantBaseline\": \"central\",\n    \"alignmentBaseline\": \"central\",\n    \"className\": \"actor\",\n    \"style\": {\n      \"textAnchor\": \"middle\",\n      \"fontSize\": \"14px\",\n      \"fontWeight\": \"400\",\n      \"fontFamily\": \"Open-Sans, sans-serif\"\n    }\n  }), mdx(\"tspan\", _extends({\n    parentName: \"text\"\n  }, {\n    \"x\": \"475\",\n    \"dy\": \"0\"\n  }), \"Server\"))), mdx(\"defs\", {\n    parentName: \"svg\"\n  }, mdx(\"marker\", _extends({\n    parentName: \"defs\"\n  }, {\n    \"id\": \"arrowhead\",\n    \"refX\": \"5\",\n    \"refY\": \"2\",\n    \"markerWidth\": \"6\",\n    \"markerHeight\": \"4\",\n    \"orient\": \"auto\"\n  }), mdx(\"path\", _extends({\n    parentName: \"marker\"\n  }, {\n    \"d\": \"M 0,0 V 4 L6,2 Z\"\n  })))), mdx(\"defs\", {\n    parentName: \"svg\"\n  }, mdx(\"marker\", _extends({\n    parentName: \"defs\"\n  }, {\n    \"id\": \"crosshead\",\n    \"markerWidth\": \"15\",\n    \"markerHeight\": \"8\",\n    \"orient\": \"auto\",\n    \"refX\": \"16\",\n    \"refY\": \"4\"\n  }), mdx(\"path\", _extends({\n    parentName: \"marker\"\n  }, {\n    \"fill\": \"black\",\n    \"stroke\": \"#000000\",\n    \"strokeWidth\": \"1px\",\n    \"d\": \"M 9,2 V 6 L16,4 Z\",\n    \"style\": {\n      \"strokeDasharray\": \"0, 0\"\n    }\n  })), mdx(\"path\", _extends({\n    parentName: \"marker\"\n  }, {\n    \"fill\": \"none\",\n    \"stroke\": \"#000000\",\n    \"strokeWidth\": \"1px\",\n    \"d\": \"M 0,1 L 6,7 M 6,1 L 0,7\",\n    \"style\": {\n      \"strokeDasharray\": \"0, 0\"\n    }\n  })))), mdx(\"defs\", {\n    parentName: \"svg\"\n  }, mdx(\"marker\", _extends({\n    parentName: \"defs\"\n  }, {\n    \"id\": \"sequencenumber\",\n    \"refX\": \"15\",\n    \"refY\": \"15\",\n    \"markerWidth\": \"60\",\n    \"markerHeight\": \"40\",\n    \"orient\": \"auto\"\n  }), mdx(\"circle\", _extends({\n    parentName: \"marker\"\n  }, {\n    \"cx\": \"15\",\n    \"cy\": \"15\",\n    \"r\": \"6\"\n  })))), mdx(\"text\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"x\": \"175\",\n    \"y\": \"80\",\n    \"textAnchor\": \"middle\",\n    \"dominantBaseline\": \"middle\",\n    \"alignmentBaseline\": \"middle\",\n    \"className\": \"messageText\",\n    \"dy\": \"1em\",\n    \"style\": {\n      \"fontFamily\": \"\\\"trebuchet ms\\\", verdana, arial, sans-serif\",\n      \"fontSize\": \"16px\",\n      \"fontWeight\": \"400\"\n    }\n  }), \"port 80\"), mdx(\"line\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"x1\": \"75\",\n    \"y1\": \"109\",\n    \"x2\": \"275\",\n    \"y2\": \"109\",\n    \"className\": \"messageLine0\",\n    \"strokeWidth\": \"2\",\n    \"stroke\": \"none\",\n    \"markerEnd\": \"url(#arrowhead)\",\n    \"style\": {\n      \"fill\": \"none\"\n    }\n  })), mdx(\"text\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"x\": \"375\",\n    \"y\": \"124\",\n    \"textAnchor\": \"middle\",\n    \"dominantBaseline\": \"middle\",\n    \"alignmentBaseline\": \"middle\",\n    \"className\": \"messageText\",\n    \"dy\": \"1em\",\n    \"style\": {\n      \"fontFamily\": \"\\\"trebuchet ms\\\", verdana, arial, sans-serif\",\n      \"fontSize\": \"16px\",\n      \"fontWeight\": \"400\"\n    }\n  }), \"port 3000\"), mdx(\"line\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"x1\": \"275\",\n    \"y1\": \"153\",\n    \"x2\": \"475\",\n    \"y2\": \"153\",\n    \"className\": \"messageLine0\",\n    \"strokeWidth\": \"2\",\n    \"stroke\": \"none\",\n    \"markerEnd\": \"url(#arrowhead)\",\n    \"style\": {\n      \"fill\": \"none\"\n    }\n  })), mdx(\"g\", {\n    parentName: \"svg\"\n  }, mdx(\"rect\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"0\",\n    \"y\": \"173\",\n    \"fill\": \"#eaeaea\",\n    \"stroke\": \"#666\",\n    \"width\": \"150\",\n    \"height\": \"65\",\n    \"rx\": \"3\",\n    \"ry\": \"3\",\n    \"className\": \"actor\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"75\",\n    \"y\": \"205.5\",\n    \"dominantBaseline\": \"central\",\n    \"alignmentBaseline\": \"central\",\n    \"className\": \"actor\",\n    \"style\": {\n      \"textAnchor\": \"middle\",\n      \"fontSize\": \"14px\",\n      \"fontWeight\": \"400\",\n      \"fontFamily\": \"Open-Sans, sans-serif\"\n    }\n  }), mdx(\"tspan\", _extends({\n    parentName: \"text\"\n  }, {\n    \"x\": \"75\",\n    \"dy\": \"0\"\n  }), \"Browser\"))), mdx(\"g\", {\n    parentName: \"svg\"\n  }, mdx(\"rect\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"200\",\n    \"y\": \"173\",\n    \"fill\": \"#eaeaea\",\n    \"stroke\": \"#666\",\n    \"width\": \"150\",\n    \"height\": \"65\",\n    \"rx\": \"3\",\n    \"ry\": \"3\",\n    \"className\": \"actor\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"275\",\n    \"y\": \"205.5\",\n    \"dominantBaseline\": \"central\",\n    \"alignmentBaseline\": \"central\",\n    \"className\": \"actor\",\n    \"style\": {\n      \"textAnchor\": \"middle\",\n      \"fontSize\": \"14px\",\n      \"fontWeight\": \"400\",\n      \"fontFamily\": \"Open-Sans, sans-serif\"\n    }\n  }), mdx(\"tspan\", _extends({\n    parentName: \"text\"\n  }, {\n    \"x\": \"275\",\n    \"dy\": \"0\"\n  }), \"Reverse Proxy\"))), mdx(\"g\", {\n    parentName: \"svg\"\n  }, mdx(\"rect\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"400\",\n    \"y\": \"173\",\n    \"fill\": \"#eaeaea\",\n    \"stroke\": \"#666\",\n    \"width\": \"150\",\n    \"height\": \"65\",\n    \"rx\": \"3\",\n    \"ry\": \"3\",\n    \"className\": \"actor\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"475\",\n    \"y\": \"205.5\",\n    \"dominantBaseline\": \"central\",\n    \"alignmentBaseline\": \"central\",\n    \"className\": \"actor\",\n    \"style\": {\n      \"textAnchor\": \"middle\",\n      \"fontSize\": \"14px\",\n      \"fontWeight\": \"400\",\n      \"fontFamily\": \"Open-Sans, sans-serif\"\n    }\n  }), mdx(\"tspan\", _extends({\n    parentName: \"text\"\n  }, {\n    \"x\": \"475\",\n    \"dy\": \"0\"\n  }), \"Server\"))))), mdx(\"p\", null, \"In this case the user(browser) treats the reverse proxy as the \\\"server\\\". The revese proxy fetches the content from the real server on behalf of the user and returns the content to the user. In this scenario, if the reverse proxy is trusted by the authority then you have set up a server to serve just like any other functioning server without dealing with the authority.\"), mdx(\"h2\", null, \"TLS\"), mdx(\"p\", null, \"Based on the setup above, a combination of a reverse proxy and the use of a custom port has already given you an HTTP server. However, security is still a concern. TLS encryption needed not only because it prevents attack from bad guys, it also helps hide the content from the oversight, hence the chance of getting into troubles is reduced.\"), mdx(\"p\", null, \"In the circuit shown above, there are 2 connections for every request. Both of the connections need to be protected but different tactics apply.\"), mdx(\"div\", {\n    \"className\": \"mermaid\",\n    \"data-processed\": \"true\"\n  }, mdx(\"svg\", _extends({\n    parentName: \"div\"\n  }, {\n    \"id\": \"mermaid-1609857302516\",\n    \"width\": \"100%\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\",\n    \"height\": \"249\",\n    \"style\": {\n      \"maxWidth\": \"769px\"\n    },\n    \"viewBox\": \"-50 -10 769 249\"\n  }), mdx(\"style\", {\n    parentName: \"svg\"\n  }, \"#mermaid-1609857302516{font-family:\\\"trebuchet ms\\\",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-1609857302516 .error-icon{fill:#552222;}#mermaid-1609857302516 .error-text{fill:#552222;stroke:#552222;}#mermaid-1609857302516 .edge-thickness-normal{stroke-width:2px;}#mermaid-1609857302516 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-1609857302516 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-1609857302516 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-1609857302516 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-1609857302516 .marker{fill:#333333;}#mermaid-1609857302516 .marker.cross{stroke:#333333;}#mermaid-1609857302516 svg{font-family:\\\"trebuchet ms\\\",verdana,arial,sans-serif;font-size:16px;}#mermaid-1609857302516 .actor{stroke:hsl(259.6261682243,59.7765363128%,87.9019607843%);fill:#ECECFF;}#mermaid-1609857302516 text.actor > tspan{fill:black;stroke:none;}#mermaid-1609857302516 .actor-line{stroke:grey;}#mermaid-1609857302516 .messageLine0{stroke-width:1.5;stroke-dasharray:none;stroke:#333;}#mermaid-1609857302516 .messageLine1{stroke-width:1.5;stroke-dasharray:2,2;stroke:#333;}#mermaid-1609857302516 #arrowhead path{fill:#333;stroke:#333;}#mermaid-1609857302516 .sequenceNumber{fill:white;}#mermaid-1609857302516 #sequencenumber{fill:#333;}#mermaid-1609857302516 #crosshead path{fill:#333;stroke:#333;}#mermaid-1609857302516 .messageText{fill:#333;stroke:#333;}#mermaid-1609857302516 .labelBox{stroke:hsl(259.6261682243,59.7765363128%,87.9019607843%);fill:#ECECFF;}#mermaid-1609857302516 .labelText,#mermaid-1609857302516 .labelText > tspan{fill:black;stroke:none;}#mermaid-1609857302516 .loopText,#mermaid-1609857302516 .loopText > tspan{fill:black;stroke:none;}#mermaid-1609857302516 .loopLine{stroke-width:2px;stroke-dasharray:2,2;stroke:hsl(259.6261682243,59.7765363128%,87.9019607843%);fill:hsl(259.6261682243,59.7765363128%,87.9019607843%);}#mermaid-1609857302516 .note{stroke:#aaaa33;fill:#fff5ad;}#mermaid-1609857302516 .noteText,#mermaid-1609857302516 .noteText > tspan{fill:black;stroke:none;}#mermaid-1609857302516 .activation0{fill:#f4f4f4;stroke:#666;}#mermaid-1609857302516 .activation1{fill:#f4f4f4;stroke:#666;}#mermaid-1609857302516 .activation2{fill:#f4f4f4;stroke:#666;}#mermaid-1609857302516:root{--mermaid-font-family:\\\"trebuchet ms\\\",verdana,arial,sans-serif;}#mermaid-1609857302516 sequence{fill:apa;}\"), mdx(\"g\", {\n    parentName: \"svg\"\n  }), mdx(\"g\", {\n    parentName: \"svg\"\n  }, mdx(\"line\", _extends({\n    parentName: \"g\"\n  }, {\n    \"id\": \"actor0\",\n    \"x1\": \"75\",\n    \"y1\": \"5\",\n    \"x2\": \"75\",\n    \"y2\": \"238\",\n    \"className\": \"actor-line\",\n    \"strokeWidth\": \"0.5px\",\n    \"stroke\": \"#999\"\n  })), mdx(\"rect\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"0\",\n    \"y\": \"0\",\n    \"fill\": \"#eaeaea\",\n    \"stroke\": \"#666\",\n    \"width\": \"150\",\n    \"height\": \"65\",\n    \"rx\": \"3\",\n    \"ry\": \"3\",\n    \"className\": \"actor\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"75\",\n    \"y\": \"32.5\",\n    \"dominantBaseline\": \"central\",\n    \"alignmentBaseline\": \"central\",\n    \"className\": \"actor\",\n    \"style\": {\n      \"textAnchor\": \"middle\",\n      \"fontSize\": \"14px\",\n      \"fontWeight\": \"400\",\n      \"fontFamily\": \"Open-Sans, sans-serif\"\n    }\n  }), mdx(\"tspan\", _extends({\n    parentName: \"text\"\n  }, {\n    \"x\": \"75\",\n    \"dy\": \"0\"\n  }), \"Browser\"))), mdx(\"g\", {\n    parentName: \"svg\"\n  }, mdx(\"line\", _extends({\n    parentName: \"g\"\n  }, {\n    \"id\": \"actor1\",\n    \"x1\": \"294\",\n    \"y1\": \"5\",\n    \"x2\": \"294\",\n    \"y2\": \"238\",\n    \"className\": \"actor-line\",\n    \"strokeWidth\": \"0.5px\",\n    \"stroke\": \"#999\"\n  })), mdx(\"rect\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"219\",\n    \"y\": \"0\",\n    \"fill\": \"#eaeaea\",\n    \"stroke\": \"#666\",\n    \"width\": \"150\",\n    \"height\": \"65\",\n    \"rx\": \"3\",\n    \"ry\": \"3\",\n    \"className\": \"actor\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"294\",\n    \"y\": \"32.5\",\n    \"dominantBaseline\": \"central\",\n    \"alignmentBaseline\": \"central\",\n    \"className\": \"actor\",\n    \"style\": {\n      \"textAnchor\": \"middle\",\n      \"fontSize\": \"14px\",\n      \"fontWeight\": \"400\",\n      \"fontFamily\": \"Open-Sans, sans-serif\"\n    }\n  }), mdx(\"tspan\", _extends({\n    parentName: \"text\"\n  }, {\n    \"x\": \"294\",\n    \"dy\": \"0\"\n  }), \"Reverse Proxy\"))), mdx(\"g\", {\n    parentName: \"svg\"\n  }, mdx(\"line\", _extends({\n    parentName: \"g\"\n  }, {\n    \"id\": \"actor2\",\n    \"x1\": \"594\",\n    \"y1\": \"5\",\n    \"x2\": \"594\",\n    \"y2\": \"238\",\n    \"className\": \"actor-line\",\n    \"strokeWidth\": \"0.5px\",\n    \"stroke\": \"#999\"\n  })), mdx(\"rect\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"519\",\n    \"y\": \"0\",\n    \"fill\": \"#eaeaea\",\n    \"stroke\": \"#666\",\n    \"width\": \"150\",\n    \"height\": \"65\",\n    \"rx\": \"3\",\n    \"ry\": \"3\",\n    \"className\": \"actor\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"594\",\n    \"y\": \"32.5\",\n    \"dominantBaseline\": \"central\",\n    \"alignmentBaseline\": \"central\",\n    \"className\": \"actor\",\n    \"style\": {\n      \"textAnchor\": \"middle\",\n      \"fontSize\": \"14px\",\n      \"fontWeight\": \"400\",\n      \"fontFamily\": \"Open-Sans, sans-serif\"\n    }\n  }), mdx(\"tspan\", _extends({\n    parentName: \"text\"\n  }, {\n    \"x\": \"594\",\n    \"dy\": \"0\"\n  }), \"Server\"))), mdx(\"defs\", {\n    parentName: \"svg\"\n  }, mdx(\"marker\", _extends({\n    parentName: \"defs\"\n  }, {\n    \"id\": \"arrowhead\",\n    \"refX\": \"5\",\n    \"refY\": \"2\",\n    \"markerWidth\": \"6\",\n    \"markerHeight\": \"4\",\n    \"orient\": \"auto\"\n  }), mdx(\"path\", _extends({\n    parentName: \"marker\"\n  }, {\n    \"d\": \"M 0,0 V 4 L6,2 Z\"\n  })))), mdx(\"defs\", {\n    parentName: \"svg\"\n  }, mdx(\"marker\", _extends({\n    parentName: \"defs\"\n  }, {\n    \"id\": \"crosshead\",\n    \"markerWidth\": \"15\",\n    \"markerHeight\": \"8\",\n    \"orient\": \"auto\",\n    \"refX\": \"16\",\n    \"refY\": \"4\"\n  }), mdx(\"path\", _extends({\n    parentName: \"marker\"\n  }, {\n    \"fill\": \"black\",\n    \"stroke\": \"#000000\",\n    \"strokeWidth\": \"1px\",\n    \"d\": \"M 9,2 V 6 L16,4 Z\",\n    \"style\": {\n      \"strokeDasharray\": \"0, 0\"\n    }\n  })), mdx(\"path\", _extends({\n    parentName: \"marker\"\n  }, {\n    \"fill\": \"none\",\n    \"stroke\": \"#000000\",\n    \"strokeWidth\": \"1px\",\n    \"d\": \"M 0,1 L 6,7 M 6,1 L 0,7\",\n    \"style\": {\n      \"strokeDasharray\": \"0, 0\"\n    }\n  })))), mdx(\"defs\", {\n    parentName: \"svg\"\n  }, mdx(\"marker\", _extends({\n    parentName: \"defs\"\n  }, {\n    \"id\": \"sequencenumber\",\n    \"refX\": \"15\",\n    \"refY\": \"15\",\n    \"markerWidth\": \"60\",\n    \"markerHeight\": \"40\",\n    \"orient\": \"auto\"\n  }), mdx(\"circle\", _extends({\n    parentName: \"marker\"\n  }, {\n    \"cx\": \"15\",\n    \"cy\": \"15\",\n    \"r\": \"6\"\n  })))), mdx(\"text\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"x\": \"185\",\n    \"y\": \"80\",\n    \"textAnchor\": \"middle\",\n    \"dominantBaseline\": \"middle\",\n    \"alignmentBaseline\": \"middle\",\n    \"className\": \"messageText\",\n    \"dy\": \"1em\",\n    \"style\": {\n      \"fontFamily\": \"\\\"trebuchet ms\\\", verdana, arial, sans-serif\",\n      \"fontSize\": \"16px\",\n      \"fontWeight\": \"400\"\n    }\n  }), \"CA trusted certificate\"), mdx(\"line\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"x1\": \"75\",\n    \"y1\": \"109\",\n    \"x2\": \"294\",\n    \"y2\": \"109\",\n    \"className\": \"messageLine0\",\n    \"strokeWidth\": \"2\",\n    \"stroke\": \"none\",\n    \"markerEnd\": \"url(#arrowhead)\",\n    \"style\": {\n      \"fill\": \"none\"\n    }\n  })), mdx(\"text\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"x\": \"444\",\n    \"y\": \"124\",\n    \"textAnchor\": \"middle\",\n    \"dominantBaseline\": \"middle\",\n    \"alignmentBaseline\": \"middle\",\n    \"className\": \"messageText\",\n    \"dy\": \"1em\",\n    \"style\": {\n      \"fontFamily\": \"\\\"trebuchet ms\\\", verdana, arial, sans-serif\",\n      \"fontSize\": \"16px\",\n      \"fontWeight\": \"400\"\n    }\n  }), \"Reverse proxy trusted certificate\"), mdx(\"line\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"x1\": \"294\",\n    \"y1\": \"153\",\n    \"x2\": \"594\",\n    \"y2\": \"153\",\n    \"className\": \"messageLine0\",\n    \"strokeWidth\": \"2\",\n    \"stroke\": \"none\",\n    \"markerEnd\": \"url(#arrowhead)\",\n    \"style\": {\n      \"fill\": \"none\"\n    }\n  })), mdx(\"g\", {\n    parentName: \"svg\"\n  }, mdx(\"rect\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"0\",\n    \"y\": \"173\",\n    \"fill\": \"#eaeaea\",\n    \"stroke\": \"#666\",\n    \"width\": \"150\",\n    \"height\": \"65\",\n    \"rx\": \"3\",\n    \"ry\": \"3\",\n    \"className\": \"actor\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"75\",\n    \"y\": \"205.5\",\n    \"dominantBaseline\": \"central\",\n    \"alignmentBaseline\": \"central\",\n    \"className\": \"actor\",\n    \"style\": {\n      \"textAnchor\": \"middle\",\n      \"fontSize\": \"14px\",\n      \"fontWeight\": \"400\",\n      \"fontFamily\": \"Open-Sans, sans-serif\"\n    }\n  }), mdx(\"tspan\", _extends({\n    parentName: \"text\"\n  }, {\n    \"x\": \"75\",\n    \"dy\": \"0\"\n  }), \"Browser\"))), mdx(\"g\", {\n    parentName: \"svg\"\n  }, mdx(\"rect\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"219\",\n    \"y\": \"173\",\n    \"fill\": \"#eaeaea\",\n    \"stroke\": \"#666\",\n    \"width\": \"150\",\n    \"height\": \"65\",\n    \"rx\": \"3\",\n    \"ry\": \"3\",\n    \"className\": \"actor\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"294\",\n    \"y\": \"205.5\",\n    \"dominantBaseline\": \"central\",\n    \"alignmentBaseline\": \"central\",\n    \"className\": \"actor\",\n    \"style\": {\n      \"textAnchor\": \"middle\",\n      \"fontSize\": \"14px\",\n      \"fontWeight\": \"400\",\n      \"fontFamily\": \"Open-Sans, sans-serif\"\n    }\n  }), mdx(\"tspan\", _extends({\n    parentName: \"text\"\n  }, {\n    \"x\": \"294\",\n    \"dy\": \"0\"\n  }), \"Reverse Proxy\"))), mdx(\"g\", {\n    parentName: \"svg\"\n  }, mdx(\"rect\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"519\",\n    \"y\": \"173\",\n    \"fill\": \"#eaeaea\",\n    \"stroke\": \"#666\",\n    \"width\": \"150\",\n    \"height\": \"65\",\n    \"rx\": \"3\",\n    \"ry\": \"3\",\n    \"className\": \"actor\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"594\",\n    \"y\": \"205.5\",\n    \"dominantBaseline\": \"central\",\n    \"alignmentBaseline\": \"central\",\n    \"className\": \"actor\",\n    \"style\": {\n      \"textAnchor\": \"middle\",\n      \"fontSize\": \"14px\",\n      \"fontWeight\": \"400\",\n      \"fontFamily\": \"Open-Sans, sans-serif\"\n    }\n  }), mdx(\"tspan\", _extends({\n    parentName: \"text\"\n  }, {\n    \"x\": \"594\",\n    \"dy\": \"0\"\n  }), \"Server\"))))), mdx(\"p\", null, \"The certificate of the reverse proxy can be set up in a more convenient way. Many providers like CloudFlare offer it out of the box.\"), mdx(\"p\", null, \"The certificate installed on the server should be trusted by the reverse proxy. Many service providers offer free certificates signed by themselves for this use case.\"), mdx(\"h1\", null, \"Recommended Practices\"), mdx(\"p\", null, \"This section records the practices I exercised based on the above principles.\"), mdx(\"h2\", null, \"Choice of Service Provider\"), mdx(\"p\", null, \"The key component in the tool chain is the reverse proxy. Normally a cloud service provider is the best choice as it has all the functionalities we need out of the box.\"), mdx(\"p\", null, \"There surely are many possible options out there. But I have only used CloudFlare, the most popular one.\"), mdx(\"p\", null, \"CloudFlare is not only a reverse proxy provider, it is also a DNS service provider. Below is how I started to manage my sites and domains using CloudFlare. \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://support.cloudflare.com/hc/en-us/articles/201720164-Creating-a-Cloudflare-account-and-adding-a-website#2YulMb5YJTVnMxgAgNWdS2\"\n  }), \"The official docs\"), \" has stated every detail already. I just need to re-emphasize one point relating to the settings of the domain registrar.\"), mdx(\"p\", null, \"CloudFlare is able to conform with any registrar, as long as the name server settings are correct. The upstream name server should be set to the ones provided by CloudFlare at the registrar's dashboard. Then the NS records must be set to match the name server settings. This effect of this change may take several hours to ripple through the entire internet.\"), mdx(\"h2\", null, \"TLS on Origin\"), mdx(\"p\", null, \"In the CloudFlare's terminology, the real server serving the site is called \\\"origin\\\". The proxy mode is on by default to hide the IP address of the origin from attackers. All the DNS records resolve to the same reverse proxy only. The proxy fetches the content from the origin and returns to the visitor on every request. The topology has already been discussed in the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"#principles\"\n  }), \"principle section\"), \".\"), mdx(\"p\", null, \"One issue remaining is the security of the connection between the CloudFlare's reverse proxy and the origin. In this single channel, the CloudFlare reverse proxy acts as the client and the origin acts as the server. Hence the TLS certificate installed on the origin must be trusted by the reverse proxy. Fortunately CloudFlare offers free TLS certificate for the domains managed by it.\"), mdx(\"div\", {\n    \"className\": \"mermaid\",\n    \"data-processed\": \"true\"\n  }, mdx(\"svg\", _extends({\n    parentName: \"div\"\n  }, {\n    \"id\": \"mermaid-1609857302567\",\n    \"width\": \"100%\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\",\n    \"height\": \"205\",\n    \"style\": {\n      \"maxWidth\": \"616px\"\n    },\n    \"viewBox\": \"-50 -10 616 205\"\n  }), mdx(\"style\", {\n    parentName: \"svg\"\n  }, \"#mermaid-1609857302567{font-family:\\\"trebuchet ms\\\",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-1609857302567 .error-icon{fill:#552222;}#mermaid-1609857302567 .error-text{fill:#552222;stroke:#552222;}#mermaid-1609857302567 .edge-thickness-normal{stroke-width:2px;}#mermaid-1609857302567 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-1609857302567 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-1609857302567 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-1609857302567 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-1609857302567 .marker{fill:#333333;}#mermaid-1609857302567 .marker.cross{stroke:#333333;}#mermaid-1609857302567 svg{font-family:\\\"trebuchet ms\\\",verdana,arial,sans-serif;font-size:16px;}#mermaid-1609857302567 .actor{stroke:hsl(259.6261682243,59.7765363128%,87.9019607843%);fill:#ECECFF;}#mermaid-1609857302567 text.actor > tspan{fill:black;stroke:none;}#mermaid-1609857302567 .actor-line{stroke:grey;}#mermaid-1609857302567 .messageLine0{stroke-width:1.5;stroke-dasharray:none;stroke:#333;}#mermaid-1609857302567 .messageLine1{stroke-width:1.5;stroke-dasharray:2,2;stroke:#333;}#mermaid-1609857302567 #arrowhead path{fill:#333;stroke:#333;}#mermaid-1609857302567 .sequenceNumber{fill:white;}#mermaid-1609857302567 #sequencenumber{fill:#333;}#mermaid-1609857302567 #crosshead path{fill:#333;stroke:#333;}#mermaid-1609857302567 .messageText{fill:#333;stroke:#333;}#mermaid-1609857302567 .labelBox{stroke:hsl(259.6261682243,59.7765363128%,87.9019607843%);fill:#ECECFF;}#mermaid-1609857302567 .labelText,#mermaid-1609857302567 .labelText > tspan{fill:black;stroke:none;}#mermaid-1609857302567 .loopText,#mermaid-1609857302567 .loopText > tspan{fill:black;stroke:none;}#mermaid-1609857302567 .loopLine{stroke-width:2px;stroke-dasharray:2,2;stroke:hsl(259.6261682243,59.7765363128%,87.9019607843%);fill:hsl(259.6261682243,59.7765363128%,87.9019607843%);}#mermaid-1609857302567 .note{stroke:#aaaa33;fill:#fff5ad;}#mermaid-1609857302567 .noteText,#mermaid-1609857302567 .noteText > tspan{fill:black;stroke:none;}#mermaid-1609857302567 .activation0{fill:#f4f4f4;stroke:#666;}#mermaid-1609857302567 .activation1{fill:#f4f4f4;stroke:#666;}#mermaid-1609857302567 .activation2{fill:#f4f4f4;stroke:#666;}#mermaid-1609857302567:root{--mermaid-font-family:\\\"trebuchet ms\\\",verdana,arial,sans-serif;}#mermaid-1609857302567 sequence{fill:apa;}\"), mdx(\"g\", {\n    parentName: \"svg\"\n  }), mdx(\"g\", {\n    parentName: \"svg\"\n  }, mdx(\"line\", _extends({\n    parentName: \"g\"\n  }, {\n    \"id\": \"actor0\",\n    \"x1\": \"127\",\n    \"y1\": \"5\",\n    \"x2\": \"127\",\n    \"y2\": \"194\",\n    \"className\": \"actor-line\",\n    \"strokeWidth\": \"0.5px\",\n    \"stroke\": \"#999\"\n  })), mdx(\"rect\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"0\",\n    \"y\": \"0\",\n    \"fill\": \"#eaeaea\",\n    \"stroke\": \"#666\",\n    \"width\": \"254\",\n    \"height\": \"65\",\n    \"rx\": \"3\",\n    \"ry\": \"3\",\n    \"className\": \"actor\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"127\",\n    \"y\": \"32.5\",\n    \"dominantBaseline\": \"central\",\n    \"alignmentBaseline\": \"central\",\n    \"className\": \"actor\",\n    \"style\": {\n      \"textAnchor\": \"middle\",\n      \"fontSize\": \"14px\",\n      \"fontWeight\": \"400\",\n      \"fontFamily\": \"Open-Sans, sans-serif\"\n    }\n  }), mdx(\"tspan\", _extends({\n    parentName: \"text\"\n  }, {\n    \"x\": \"127\",\n    \"dy\": \"0\"\n  }), \"site.example.com(Reverse Proxy)\"))), mdx(\"g\", {\n    parentName: \"svg\"\n  }, mdx(\"line\", _extends({\n    parentName: \"g\"\n  }, {\n    \"id\": \"actor1\",\n    \"x1\": \"410\",\n    \"y1\": \"5\",\n    \"x2\": \"410\",\n    \"y2\": \"194\",\n    \"className\": \"actor-line\",\n    \"strokeWidth\": \"0.5px\",\n    \"stroke\": \"#999\"\n  })), mdx(\"rect\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"304\",\n    \"y\": \"0\",\n    \"fill\": \"#eaeaea\",\n    \"stroke\": \"#666\",\n    \"width\": \"212\",\n    \"height\": \"65\",\n    \"rx\": \"3\",\n    \"ry\": \"3\",\n    \"className\": \"actor\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"410\",\n    \"y\": \"32.5\",\n    \"dominantBaseline\": \"central\",\n    \"alignmentBaseline\": \"central\",\n    \"className\": \"actor\",\n    \"style\": {\n      \"textAnchor\": \"middle\",\n      \"fontSize\": \"14px\",\n      \"fontWeight\": \"400\",\n      \"fontFamily\": \"Open-Sans, sans-serif\"\n    }\n  }), mdx(\"tspan\", _extends({\n    parentName: \"text\"\n  }, {\n    \"x\": \"410\",\n    \"dy\": \"0\"\n  }), \"origin.example.com(Origin)\"))), mdx(\"defs\", {\n    parentName: \"svg\"\n  }, mdx(\"marker\", _extends({\n    parentName: \"defs\"\n  }, {\n    \"id\": \"arrowhead\",\n    \"refX\": \"5\",\n    \"refY\": \"2\",\n    \"markerWidth\": \"6\",\n    \"markerHeight\": \"4\",\n    \"orient\": \"auto\"\n  }), mdx(\"path\", _extends({\n    parentName: \"marker\"\n  }, {\n    \"d\": \"M 0,0 V 4 L6,2 Z\"\n  })))), mdx(\"defs\", {\n    parentName: \"svg\"\n  }, mdx(\"marker\", _extends({\n    parentName: \"defs\"\n  }, {\n    \"id\": \"crosshead\",\n    \"markerWidth\": \"15\",\n    \"markerHeight\": \"8\",\n    \"orient\": \"auto\",\n    \"refX\": \"16\",\n    \"refY\": \"4\"\n  }), mdx(\"path\", _extends({\n    parentName: \"marker\"\n  }, {\n    \"fill\": \"black\",\n    \"stroke\": \"#000000\",\n    \"strokeWidth\": \"1px\",\n    \"d\": \"M 9,2 V 6 L16,4 Z\",\n    \"style\": {\n      \"strokeDasharray\": \"0, 0\"\n    }\n  })), mdx(\"path\", _extends({\n    parentName: \"marker\"\n  }, {\n    \"fill\": \"none\",\n    \"stroke\": \"#000000\",\n    \"strokeWidth\": \"1px\",\n    \"d\": \"M 0,1 L 6,7 M 6,1 L 0,7\",\n    \"style\": {\n      \"strokeDasharray\": \"0, 0\"\n    }\n  })))), mdx(\"defs\", {\n    parentName: \"svg\"\n  }, mdx(\"marker\", _extends({\n    parentName: \"defs\"\n  }, {\n    \"id\": \"sequencenumber\",\n    \"refX\": \"15\",\n    \"refY\": \"15\",\n    \"markerWidth\": \"60\",\n    \"markerHeight\": \"40\",\n    \"orient\": \"auto\"\n  }), mdx(\"circle\", _extends({\n    parentName: \"marker\"\n  }, {\n    \"cx\": \"15\",\n    \"cy\": \"15\",\n    \"r\": \"6\"\n  })))), mdx(\"text\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"x\": \"269\",\n    \"y\": \"80\",\n    \"textAnchor\": \"middle\",\n    \"dominantBaseline\": \"middle\",\n    \"alignmentBaseline\": \"middle\",\n    \"className\": \"messageText\",\n    \"dy\": \"1em\",\n    \"style\": {\n      \"fontFamily\": \"\\\"trebuchet ms\\\", verdana, arial, sans-serif\",\n      \"fontSize\": \"16px\",\n      \"fontWeight\": \"400\"\n    }\n  }), \"TLS certified by CloudFlare\"), mdx(\"line\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"x1\": \"127\",\n    \"y1\": \"109\",\n    \"x2\": \"410\",\n    \"y2\": \"109\",\n    \"className\": \"messageLine0\",\n    \"strokeWidth\": \"2\",\n    \"stroke\": \"none\",\n    \"markerEnd\": \"url(#arrowhead)\",\n    \"style\": {\n      \"fill\": \"none\"\n    }\n  })), mdx(\"g\", {\n    parentName: \"svg\"\n  }, mdx(\"rect\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"0\",\n    \"y\": \"129\",\n    \"fill\": \"#eaeaea\",\n    \"stroke\": \"#666\",\n    \"width\": \"254\",\n    \"height\": \"65\",\n    \"rx\": \"3\",\n    \"ry\": \"3\",\n    \"className\": \"actor\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"127\",\n    \"y\": \"161.5\",\n    \"dominantBaseline\": \"central\",\n    \"alignmentBaseline\": \"central\",\n    \"className\": \"actor\",\n    \"style\": {\n      \"textAnchor\": \"middle\",\n      \"fontSize\": \"14px\",\n      \"fontWeight\": \"400\",\n      \"fontFamily\": \"Open-Sans, sans-serif\"\n    }\n  }), mdx(\"tspan\", _extends({\n    parentName: \"text\"\n  }, {\n    \"x\": \"127\",\n    \"dy\": \"0\"\n  }), \"site.example.com(Reverse Proxy)\"))), mdx(\"g\", {\n    parentName: \"svg\"\n  }, mdx(\"rect\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"304\",\n    \"y\": \"129\",\n    \"fill\": \"#eaeaea\",\n    \"stroke\": \"#666\",\n    \"width\": \"212\",\n    \"height\": \"65\",\n    \"rx\": \"3\",\n    \"ry\": \"3\",\n    \"className\": \"actor\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"x\": \"410\",\n    \"y\": \"161.5\",\n    \"dominantBaseline\": \"central\",\n    \"alignmentBaseline\": \"central\",\n    \"className\": \"actor\",\n    \"style\": {\n      \"textAnchor\": \"middle\",\n      \"fontSize\": \"14px\",\n      \"fontWeight\": \"400\",\n      \"fontFamily\": \"Open-Sans, sans-serif\"\n    }\n  }), mdx(\"tspan\", _extends({\n    parentName: \"text\"\n  }, {\n    \"x\": \"410\",\n    \"dy\": \"0\"\n  }), \"origin.example.com(Origin)\"))))), mdx(\"h2\", null, \"Reverse Proxy\"), mdx(\"p\", null, \"In CloudFlare, the reverse proxy can be achieved in many ways, the most flexible one being \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://workers.cloudflare.com/\"\n  }), \"worker\"), \".\"), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://workers.cloudflare.com/\"\n  }), \"Worker\"), \" is a serverless technology offered by CloudFlare. To set up a simple reverse proxy simply masking the true destination, only few lines of code is required to make it work:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"const ORIGIN = \\\"origin.example.com\\\";\\nconst PORT = `2096`;\\naddEventListener(\\\"fetch\\\", (event) => {\\n  event.passThroughOnException();\\n  const url = new URL(event.request.url);\\n  url.port = PORT;\\n  url.hostname = ORIGIN;\\n  const request = new Request(url, event.request);\\n  return event.respondWith(fetch(request));\\n});\\n\")), mdx(\"p\", null, \"The worker needs to be configured with a route(subdomain) for convenience, otherwise the access url is something randomized and long.\"));\n}\n;\nMDXContent.isMDXComponent = true;","headings":[{"value":"Principles","depth":1},{"value":"Use A Custom Port","depth":2},{"value":"Reverse Proxy","depth":2},{"value":"TLS","depth":2},{"value":"Recommended Practices","depth":1},{"value":"Choice of Service Provider","depth":2},{"value":"TLS on Origin","depth":2},{"value":"Reverse Proxy","depth":2}]}},"pageContext":{"locale":"en","type":"post","title":"Bypass Domain Censorship","date":"2020-12-20T00:00:00.000Z","author":"onichandame"}},"staticQueryHashes":["440568431","840944156","899237799","899237799"]}